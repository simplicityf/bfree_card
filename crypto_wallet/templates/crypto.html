{% extends 'base.html' %}
{% load static %}
{% block title %}Crypto{% endblock %}
{% block content %}
    <main class="crypto-wallets">
        <div class="crypto-header crypto-funding">
            <span class="crypto-header-text">Crypto Funding Options</span>
        </div>
        <div class="crypto-funding" style="background-color: #f8f8f8; padding-top: 1px; padding-bottom: 1px; border-radius:5px;">
            <div style="margin-left: 64px; margin-right: 67px; padding-top: 5px;">
                <b style="font-weight: bold;">Low-Cost Funding:</b> Send crypto to any wallet address below. Click the Copy & Fund button next to the wallet address you want to send crypto to, and provide the transaction ID and amount sent. A 10% fee applies. We'll confirm and credit your wallet within 48 hours.
            </div>
            <br><br>
            <div class="table-head" style="margin-left: 67px; margin-right: 67px; display: flex; gap: 15px;">
                <h5 style="width:74%; display: flex;align-items: center;justify-content: center;">Wallet Address</h5>
                <h5 style="width:13%; display: flex;align-items: center;justify-content: center;">Coin</h5>
                <h5 style="width:13%; display: flex;align-items: center;justify-content: center;">Network Chain</h5>
            </div>
            <div class="wallet-address-container" style="overflow-y: auto; height: 200px;">
                <!-- TABLE DISPLAY DYNAMIC TABLE -->
                <table id="wallet-table" style="background-color: #f8f8f8; user-select: none; border: none;">
                    
                    <tbody>
                        {% for address in crypto_addresses reversed %}
                        <tr>
                            <td class="wallet-address">
                                <button class="fund_with_address_btn" data-address_id="{{address.id}}" onclick="getAddressId(this)" id="crypto_address{{address.id}}" type="button" style="display: flex; align-items: center; justify-content: center;column-gap: 10px;">
                                    <div class="copy-wallet" style="cursor: pointer;">
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 256 256" xml:space="preserve">
                                        <defs>
                                        </defs>
                                        <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                                            <path d="M 51.047 40.954 H 14.692 c -0.552 0 -1 0.448 -1 1 s 0.448 1 1 1 h 36.354 c 0.553 0 1 -0.448 1 -1 S 51.6 40.954 51.047 40.954 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: white; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                                            <path d="M 51.047 55.05 H 14.692 c -0.552 0 -1 0.447 -1 1 s 0.448 1 1 1 h 36.354 c 0.553 0 1 -0.447 1 -1 S 51.6 55.05 51.047 55.05 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: white; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                                            <path d="M 51.047 69.146 H 14.692 c -0.552 0 -1 0.447 -1 1 s 0.448 1 1 1 h 36.354 c 0.553 0 1 -0.447 1 -1 S 51.6 69.146 51.047 69.146 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: white; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                                            <path d="M 87.894 16.034 c -0.006 -0.09 -0.023 -0.177 -0.053 -0.263 c -0.011 -0.032 -0.02 -0.063 -0.034 -0.093 c -0.05 -0.107 -0.112 -0.209 -0.2 -0.295 L 72.211 0.286 c -0.085 -0.084 -0.185 -0.144 -0.29 -0.191 c -0.032 -0.015 -0.065 -0.023 -0.098 -0.034 c -0.081 -0.027 -0.162 -0.043 -0.246 -0.048 C 71.554 0.011 71.533 0 71.511 0 H 33.138 c -3.741 0 -6.785 3.043 -6.785 6.785 v 2.313 H 8.878 c -3.741 0 -6.785 3.043 -6.785 6.785 v 67.333 C 2.093 86.957 5.137 90 8.878 90 h 47.983 c 3.741 0 6.785 -3.043 6.785 -6.784 v -2.313 h 17.476 c 3.741 0 6.784 -3.043 6.784 -6.784 V 16.097 C 87.906 16.075 87.895 16.056 87.894 16.034 z M 84.458 15.097 h -8.727 c -1.776 0 -3.221 -1.444 -3.221 -3.22 V 3.381 L 84.458 15.097 z M 61.646 83.216 c 0 2.638 -2.146 4.784 -4.785 4.784 H 8.878 c -2.638 0 -4.785 -2.146 -4.785 -4.784 V 15.882 c 0 -2.638 2.146 -4.785 4.785 -4.785 h 18.476 h 18.897 V 21.15 c 0 2.782 2.263 5.044 5.044 5.044 h 10.352 v 53.708 V 83.216 z M 60.198 24.195 h -8.903 c -1.679 0 -3.044 -1.366 -3.044 -3.044 v -8.671 L 60.198 24.195 z M 81.122 78.902 H 63.646 V 62.049 h 11.661 c 0.553 0 1 -0.447 1 -1 s -0.447 -1 -1 -1 H 63.646 V 47.952 h 11.661 c 0.553 0 1 -0.447 1 -1 s -0.447 -1 -1 -1 H 63.646 V 33.856 h 11.661 c 0.553 0 1 -0.448 1 -1 s -0.447 -1 -1 -1 H 63.646 v -6.662 c 0 -0.022 -0.011 -0.041 -0.013 -0.063 c -0.006 -0.09 -0.023 -0.177 -0.053 -0.262 c -0.012 -0.033 -0.021 -0.066 -0.035 -0.097 c -0.044 -0.094 -0.102 -0.182 -0.175 -0.26 c -0.008 -0.008 -0.012 -0.019 -0.021 -0.027 c -0.001 -0.001 -0.002 -0.003 -0.003 -0.004 L 47.959 9.391 c 0 0 -0.001 -0.001 -0.001 -0.001 l -0.007 -0.006 c -0.083 -0.081 -0.18 -0.141 -0.282 -0.188 c -0.013 -0.006 -0.023 -0.016 -0.036 -0.021 c -0.023 -0.01 -0.048 -0.008 -0.072 -0.016 c -0.08 -0.026 -0.161 -0.043 -0.245 -0.048 c -0.023 -0.002 -0.043 -0.013 -0.066 -0.013 H 28.354 V 6.785 C 28.354 4.146 30.5 2 33.138 2 h 37.373 v 9.877 c 0 2.878 2.342 5.22 5.221 5.22 h 10.175 v 57.021 C 85.906 76.756 83.76 78.902 81.122 78.902 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: white; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                                        </g>
                                    </svg>
                                </div>Copy & Fund</button>
                                <text class="wallet-address-copy">{{address.address}}</text>
                            </td>
                            <td class="coin" style="text-align: left;">{{address.coin}}</td>
                            <td class="network-chain" style="text-align: left;">{{address.network_chain}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>           
            </div>
        </div>
        
        
        <div style="box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); margin-left: 67px; margin-right: 67px; border-radius: 7px; padding-top: 10px;">
            <div class="crypto-funding" style="padding-bottom: 20px;">
            <b style="font-weight: bold;">Instant Funding:</b> This option is faster but incurs higher fees. A 10% fee will be charged by us, and additional fees may apply from our payment processing partners.
            </div>
            <!-- change your password section -->
            <div class="change_password_container" style="margin-top: 0rem;">
                <div class="change_password_main" id="changePasswordMain" style="width: 21rem;">
                    <div class="change_pass_box">
                        <h4>Instant Funding</h4>
                    </div>
        
                    <form class="form_password" id="fund_wallet_form">
                        {% csrf_token %}
                        <div class="new_password_box">
                            <label for="">Amount ($)</label>
                            <div class="new_password_input">
                                <input type="number" name="amount" id="amount" autocomplete="off" required>
                            </div>
                        </div>
                        <div class="login_error_message">
                            <br>
                            <span class="fund_wallet_form_error"></span>
                        </div>
                        <div class="send_verification_box">
                            <button id="sendVerificationBtn" type="submit">Fund</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        {% comment %} <div class="overview-balance-container">
            <div class="overview-balance-div">
                <div class="overview-balance-caption">
                    <div class="overview-balance">
                        <h4>Overview Balance</h4>
                        <p>This is your week's overview balance</p>
                        <h5>Last Week <span id="lastWeekBalance">$563,443</span></h5>
                    </div>   
                    <div class="weeks-earnings">
                        <h4 id="weeksEarnings">$557,235.31</h4>
                    </div>
                </div>
                <!-- CRYPTO CHART -->
                <div class="wallet-chart">
                    <canvas id="cryptoWalletChart" width="100%" height="100%"></canvas>
                </div>
            </div>
            <div class="wallet-activity-container">
                <div class="wallet-activity-caption">
                    <div class="wallet-capt-text">
                        <h5>Wallet Activity</h5>
                        <p>This is your activity log</p>
                    </div>
                    <div class="wallet-activity-view">
                        <button type="button" class="view-option">
                            Monthly
                        </button>
                        <button type="button" class="view-option">
                            Weekly
                        </button>
                        <button type="button" class="view-option activeB">
                            Today
                        </button>
                    </div>
                </div>
                <div class="wallet-activity">
                    <div class="wallet-activity-tabs">
                        <div class="transact-type">
                            <div class="wallet-icon withdraw">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                                        <path d="M 49 86 V 4 c 0 -2.209 -1.791 -4 -4 -4 s -4 1.791 -4 4 v 82 c 0 2.209 1.791 4 4 4 S 49 88.209 49 86 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                        <path d="M 61.993 73.007 c 0 -1.023 -0.391 -2.048 -1.172 -2.828 c -1.562 -1.563 -4.095 -1.563 -5.656 0 L 45 80.343 L 34.836 70.179 c -1.562 -1.563 -4.095 -1.563 -5.657 0 c -1.562 1.561 -1.562 4.094 0 5.656 l 12.993 12.993 C 42.922 89.578 43.939 90 45 90 c 1.061 0 2.078 -0.422 2.828 -1.172 l 12.993 -12.993 C 61.602 75.055 61.993 74.031 61.993 73.007 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                    </g>
                                </svg>
                            </div>
                            <h4>Withdraw</h4>
                        </div>
                        <div class="wallet-tab-details">
                            <p class="transaction-time">06:24:45 AM</p>
                            <h5>- $542</h5>
                        </div>
                        <div class="transaction-stat">
                            <p class="transaction-status pending">
                                Pending
                            </p>
                        </div>
                    </div>
                    <div class="wallet-activity-tabs">
                        <div class="transact-type">
                            <div class="wallet-icon topup">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                                        <path d="M 49 4 v 82 c 0 2.209 -1.791 4 -4 4 s -4 -1.791 -4 -4 V 4 c 0 -2.209 1.791 -4 4 -4 S 49 1.791 49 4 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                        <path d="M 61.993 16.994 c 0 1.023 -0.391 2.048 -1.172 2.828 c -1.562 1.563 -4.095 1.563 -5.656 0 L 45 9.658 L 34.836 19.822 c -1.562 1.563 -4.095 1.563 -5.657 0 c -1.562 -1.561 -1.562 -4.094 0 -5.656 L 42.171 1.172 C 42.922 0.422 43.939 0 45 0 c 1.061 0 2.078 0.422 2.828 1.172 l 12.993 12.993 C 61.602 14.946 61.993 15.97 61.993 16.994 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                    </g>
                                </svg>
                            </div>
                            <h4>Topup</h4>
                        </div>
                        <div class="wallet-tab-details">
                            <p class="transaction-time">06:20:45 AM</p>
                            <h5>+ $5,553</h5>
                        </div>
                        <div class="transaction-stat">
                            <p class="transaction-status completed">
                                Completed
                            </p>
                        </div>
                    </div>
                    <div class="wallet-activity-tabs">
                        <div class="transact-type">
                            <div class="wallet-icon withdraw">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                                        <path d="M 49 86 V 4 c 0 -2.209 -1.791 -4 -4 -4 s -4 1.791 -4 4 v 82 c 0 2.209 1.791 4 4 4 S 49 88.209 49 86 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                        <path d="M 61.993 73.007 c 0 -1.023 -0.391 -2.048 -1.172 -2.828 c -1.562 -1.563 -4.095 -1.563 -5.656 0 L 45 80.343 L 34.836 70.179 c -1.562 -1.563 -4.095 -1.563 -5.657 0 c -1.562 1.561 -1.562 4.094 0 5.656 l 12.993 12.993 C 42.922 89.578 43.939 90 45 90 c 1.061 0 2.078 -0.422 2.828 -1.172 l 12.993 -12.993 C 61.602 75.055 61.993 74.031 61.993 73.007 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                    </g>
                                </svg>
                            </div>
                            <h4>Withdraw</h4>
                        </div>
                        <div class="wallet-tab-details">
                            <p class="transaction-time">06:20:45 AM</p>
                            <h5>- $912</h5>
                        </div>
                        <div class="transaction-stat">
                            <p class="transaction-status cancelled">
                                Cancelled
                            </p>
                        </div>
                    </div>
                    <div class="wallet-activity-tabs">
                        <div class="transact-type">
                            <div class="wallet-icon topup">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                                        <path d="M 49 4 v 82 c 0 2.209 -1.791 4 -4 4 s -4 -1.791 -4 -4 V 4 c 0 -2.209 1.791 -4 4 -4 S 49 1.791 49 4 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                        <path d="M 61.993 16.994 c 0 1.023 -0.391 2.048 -1.172 2.828 c -1.562 1.563 -4.095 1.563 -5.656 0 L 45 9.658 L 34.836 19.822 c -1.562 1.563 -4.095 1.563 -5.657 0 c -1.562 -1.561 -1.562 -4.094 0 -5.656 L 42.171 1.172 C 42.922 0.422 43.939 0 45 0 c 1.061 0 2.078 0.422 2.828 1.172 l 12.993 12.993 C 61.602 14.946 61.993 15.97 61.993 16.994 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                    </g>
                                </svg>
                            </div>
                            <h4>Topup</h4>
                        </div>
                        <div class="wallet-tab-details">
                            <p class="transaction-time">06:20:45 AM</p>
                            <h5>+ $5,553</h5>
                        </div>
                        <div class="transaction-stat">
                            <p class="transaction-status completed">
                                Completed
                            </p>
                        </div>
                    </div>
                    <div class="wallet-activity-tabs">
                        <div class="transact-type">
                            <div class="wallet-icon topup">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                                        <path d="M 49 4 v 82 c 0 2.209 -1.791 4 -4 4 s -4 -1.791 -4 -4 V 4 c 0 -2.209 1.791 -4 4 -4 S 49 1.791 49 4 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                        <path d="M 61.993 16.994 c 0 1.023 -0.391 2.048 -1.172 2.828 c -1.562 1.563 -4.095 1.563 -5.656 0 L 45 9.658 L 34.836 19.822 c -1.562 1.563 -4.095 1.563 -5.657 0 c -1.562 -1.561 -1.562 -4.094 0 -5.656 L 42.171 1.172 C 42.922 0.422 43.939 0 45 0 c 1.061 0 2.078 0.422 2.828 1.172 l 12.993 12.993 C 61.602 14.946 61.993 15.97 61.993 16.994 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                    </g>
                                </svg>
                            </div>
                            <h4>Topup</h4>
                        </div>
                        <div class="wallet-tab-details">
                            <p class="transaction-time">06:20:45 AM</p>
                            <h5>+ $5,553</h5>
                        </div>
                        <div class="transaction-stat">
                            <p class="transaction-status completed">
                                Completed
                            </p>
                        </div>
                    </div>
                    <div class="wallet-activity-tabs">
                        <div class="transact-type">
                            <div class="wallet-icon withdraw">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve">
                                    <defs>
                                    </defs>
                                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                                        <path d="M 49 86 V 4 c 0 -2.209 -1.791 -4 -4 -4 s -4 1.791 -4 4 v 82 c 0 2.209 1.791 4 4 4 S 49 88.209 49 86 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                        <path d="M 61.993 73.007 c 0 -1.023 -0.391 -2.048 -1.172 -2.828 c -1.562 -1.563 -4.095 -1.563 -5.656 0 L 45 80.343 L 34.836 70.179 c -1.562 -1.563 -4.095 -1.563 -5.657 0 c -1.562 1.561 -1.562 4.094 0 5.656 l 12.993 12.993 C 42.922 89.578 43.939 90 45 90 c 1.061 0 2.078 -0.422 2.828 -1.172 l 12.993 -12.993 C 61.602 75.055 61.993 74.031 61.993 73.007 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                    </g>
                                </svg>
                            </div>
                            <h4>Withdraw</h4>
                        </div>
                        <div class="wallet-tab-details">
                            <p class="transaction-time">06:24:45 AM</p>
                            <h5>- $542</h5>
                        </div>
                        <div class="transaction-stat">
                            <p class="transaction-status pending">
                                Pending
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div> {% endcomment %}
        
        <div id="copyModal" class="copy-modal">
            <div class="copy-modal-content">
                <div class="change_password_container" id="complete-transaction-modal" style="margin-top: 0rem;display:none;">
                    <div class="change_password_main" id="changePasswordMain" style="width: 26rem;">
                        <div class="change_pass_box">
                            <h4>Complete the Transaction</h4>
                        </div>
                        <div style="padding-top: 5px; font-family: 'Albert Sans', sans-serif; font-size: 16px; font-weight: 500; line-height: 24px; letter-spacing: 0em;">After sending crypto to the wallet addresses you copied, please submit the transaction ID and amount here. We will confirm your transaction within 48 hours.</div>
                        
                        <form class="form_password" id="crypto_funding_request_form">
                            {% csrf_token %}
                            <div class="new_password_box">
                                <label for="">Transaction ID</label>
                                <div class="new_password_input">
                                    <input type="text" name="transaction_id" id="transaction_id" autocomplete="off" required>
                                </div>
                            </div>
                            <div class="new_password_box">
                                <label for="">Amount ($)</label>
                                <div class="new_password_input">
                                    <input type="number" name="funding_request_amount" id="funding_request_amount" autocomplete="off" required>
                                </div>
                            </div>
                            <input type="hidden" id="address-id-input" name="address_id">
                            
                            <div class="login_error_message">
                                <br>
                                <span class="crypto_funding_request_form_error"></span>
                            </div>
                            <div class="send_verification_box">
                                <button id="sendVerificationBtn" type="submit">Fund</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="change_password_container" id="funding-request-received" style="margin-top: 0rem; display:none;">

                    <div class="password_change-container" id="passwordChangeContainer" style="display:block;">
                        <div class="password_change-main-head">  
                            <div class="password_change-image-box">
                                <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M36 3.9375C27.4995 3.94715 19.3498 7.32826 13.3391 13.3391C7.32826 19.3498 3.94715 27.4995 3.9375 36C5.69888 78.5352 66.3076 78.5229 68.0626 35.9997C68.0528 27.4992 64.6717 19.3497 58.6609 13.3389C52.6501 7.32821 44.5005 3.94715 36 3.9375ZM36 64.6875C28.3943 64.6788 21.1025 61.6536 15.7245 56.2755C10.3464 50.8975 7.32117 43.6057 7.3125 36C8.88863 -2.0578 63.1171 -2.04676 64.6876 36.0002C64.6788 43.6059 61.6536 50.8976 56.2755 56.2756C50.8974 61.6536 43.6057 64.6788 36 64.6875Z" fill="#001F8B"/>
                                    <path d="M48.3051 24.3074L32.9984 39.6141L25.9413 32.5575C25.6233 32.2487 25.1966 32.0774 24.7533 32.0806C24.31 32.0839 23.8858 32.2614 23.5724 32.5749C23.2589 32.8883 23.0814 33.3125 23.0782 33.7558C23.0749 34.1991 23.2463 34.6258 23.5551 34.9438L31.8054 43.1939C32.1231 43.508 32.5518 43.6842 32.9985 43.6842C33.4452 43.6842 33.8739 43.508 34.1916 43.1939L50.6914 26.6935C50.9995 26.3754 51.1702 25.9489 51.1667 25.506C51.1631 25.0631 50.9856 24.6394 50.6724 24.3263C50.3592 24.0131 49.9355 23.8356 49.4926 23.8321C49.0498 23.8286 48.6233 23.9993 48.3051 24.3074Z" fill="#001F8B"/>
                                </svg>
                            </div>
                
                            <div class="password_change-head-title" style="padding-bottom: 70px;">
                                <h2>Funding Request Received!</h2>
                                <br><br>
                                <p>Funding Request Received successfully. We'll confirm and credit your wallet within 48 hours.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    
    <!-- JavaScript for Form Submission -->
    <script>
        $("#fund_wallet_form").submit(function (e) {
            e.preventDefault();
            $(".pre-loader").css("display", "flex");
            $(".pre-loader").show();

            var formData = $(this).serializeArray();

            $.ajax({
                type: "POST",
                url: "{% url 'crypto' %}",
                data: formData,
                success: function (response) {
                    document.getElementById("amount").value = "";
                    var paymentUrl = response.invoice_url;
                    window.location.href = paymentUrl;
                },
                error: function (error) {
                    $(".pre-loader").hide();
                    var errorMessage = error.responseJSON.error;
                    $(".login_error_message .fund_wallet_form_error").text("*" + errorMessage);
                }
            });
        });
        
        $("#crypto_funding_request_form").submit(function (e) {
            e.preventDefault();
            $(".pre-loader").css("display", "flex");
            $(".pre-loader").show();

            var formData = $(this).serializeArray();

            $.ajax({
                type: "POST",
                url: "{% url 'crypto_funding_request' %}",
                data: formData,
                success: function (response) {
                    $(".pre-loader").hide();
                    document.getElementById("funding_request_amount").value = "";
                    document.getElementById("transaction_id").value = "";
                    showNotification(response.message);
                    $('#complete-transaction-modal').css('display', 'none');
                    $('#funding-request-received').css('display', 'block');
                },
                error: function (error) {
                    $(".pre-loader").hide();
                    var errorMessage = error.responseJSON.error;
                    $(".login_error_message .crypto_funding_request_form_error").text("*" + errorMessage);
                }
            });
        });
    </script>
    
    <script>
        // Get all navigation links
        const links = document.querySelectorAll('.nav_bar li a');
    
        // Function to handle link click
        function handleNavLinkClick(event) {
            // Prevent the default behavior of anchor tags
            event.preventDefault();
    
            const clickedLink = event.target;
            // Remove active class from all links
            links.forEach(link => {
                link.classList.remove('active');
            });
            // Add active class to the clicked link
            clickedLink.classList.add('active');
    
            // Redirect to the href of the clicked link
            window.location.href = clickedLink.getAttribute('href');
        }
    
        // Attach click event listener to each link
        links.forEach(link => {
            link.addEventListener('click', handleNavLinkClick);
        });
    
        // Automatically add the active class to the link corresponding to the current page
        const currentPath = window.location.pathname;
        links.forEach(link => {
            const href = link.getAttribute('href');
            if (href === currentPath) {
                link.classList.add('active');
            }
        });
    </script>    

    <!-- BAR CHART LIBRARY CONFIG -->
    <script>
        const ctx = document.getElementById('cryptoWalletChart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['1', '2', '3', '4', '5', '6', '7'],
                datasets: [
                {
                    label: 'Balance',
                    data: [300, 500, 600, 430, 600, 800, 600],
                    backgroundColor: '#363062',
                    borderColor: 'none',
                    borderWidth: 0,
                    borderRadius: 10,
                    barPercentage: 0.5,
                },
                ],
            },
            options: {
                scales: {
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'light',
                                color: '#000',
                            }
                        }
                    },
                    y: {
                        beginAtZero: false,
                        min: 200,
                        max: 1000,
                        ticks: {
                            stepSize: 200,
                            callback: function(value) {
                                return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') + 'k';
                            }
                        }
                    }
                },
                plugins: {
                    legend: false,
                }
            }
        });
    </script>

    <!-- FUNCTION TO SET ACTIVEB CLASS TO BUTTONS -->
    <script>
        function setActiveButton(button) {
            document.querySelectorAll('.view-option').forEach(function(btn) {
                btn.classList.remove('activeB');
            });
            button.classList.add('activeB');
        }
        document.querySelectorAll('.view-option').forEach(function(button) {
            button.addEventListener('click', function() {
                setActiveButton(button);
            });
        });
    </script>
    
    
    <!-- FUNCTION TO COPY WALLET ADDRESS AND DISPLAY MODAL -->
    <script>
        $(document).ready(function() {
            $(".pre-loader").hide();
            $(document).on('click', '.copy-wallet, .fund_with_address_btn', function() {
                // Get the wallet address associated with the clicked element
                var walletAddress = $(this).closest('tr').find('.wallet-address-copy').text().trim();
    
                // Create a temporary input element and set its value to the wallet address
                var tempInput = $('<input>');
                $('body').append(tempInput);
                tempInput.val(walletAddress).select();
                
                // Copy the wallet address to the clipboard
                try {
                    var successful = document.execCommand('copy');
                    var message = successful ? 'successful' : 'unsuccessful';
                    $('#copyModal').css('display', 'block');
                    $(".login_error_message .crypto_funding_request_form_error").text("");
                    $('#complete-transaction-modal').css('display', 'block');
                    $('#funding-request-received').css('display', 'none');
                    showNotification("Wallet Address Copied!");
                } catch (err) {
                    $('#modalMessage').text('Unable to copy wallet address');
                    $('#copyModal').css('display', 'block');
                    $('#complete-transaction-modal').css('display', 'block');
                    $(".login_error_message .crypto_funding_request_form_error").text("");
                    $('#funding-request-received').css('display', 'none');
                    console.error('Unable to copy to clipboard', err);
                }

                // Remove the temporary input element
                tempInput.remove();
            });
            
            
            $(window).click(function(event) {
                if (event.target.id === 'copyModal') {
                    $('#copyModal').css('display', 'none');
                }
            });
        });
        
        function getAddressId(button) {
            var addressId = button.getAttribute('data-address_id');
            
            var inputField = document.getElementById('address-id-input');
            
            inputField.value = addressId;
        }
    </script>
{% endblock %}
