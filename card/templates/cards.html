{% extends 'base.html' %}
{% load static %}
{% block title %} Cards{% endblock %}
{% block content %}
    <style>
        .blurred {
            opacity: 0.5; 
        }
        .hidden-text {
            color: black;
        }
        .visible-text {
            color: black;
        }
        #new{
            position: absolute;
            top: 105px;
            right: 420px;
        }
        .splide{
            overflow: hidden;
        }
        .splide__list{
            gap: 20px;
        }
        .splide__arrow {
            top: 56%;
            {% if card_count <= 3 %}
            display: none;
            {% endif %}
        }
        .bfree_cards .bfree_card .bfree_mon_card .bfree_mon_card1{
            width: 339px;
            height: 191px;
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
            display: flex;
            align-items: center;
            padding: 0 0 0 20px;
            border-radius: 10px;
        }
        .card_modal .card_submmodal .card_submmodal_content .card_submmodal_subcontent .card_submodal_subcontents .card_submmodal_subcontent2 .subcon2_image{
            
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            padding: 0 0 0 20px;
            width: 296px;
            height: 181px;
            display: flex;
            align-items: center;
        }
    </style>
    <div class="bfree_cards" onclick="popUpcontent()">
        <div class="bfree_card">
            <div class="bfree_cards_header">
                <span class="bfree_header_text">Bfree Virtual Cards</span>
            </div>
            <div class="bfree_cards_header1">
                <div class="new-card" onclick="toCreateCards()" style="cursor: pointer;">
                    <svg width="37" height="29" viewBox="0 0 37 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M29.5704 13.9404C33.6729 13.9404 37 17.312 37 21.4695C37 25.6277 33.6729 29 29.5704 29C25.4693 29 22.1422 25.6277 22.1422 21.4695C22.1422 17.312 25.4693 13.9404 29.5704 13.9404ZM2.23879 0H34.1448C35.3755 0 36.38 1.01813 36.38 2.26553V14.396C35.8972 13.9182 35.3671 13.4921 34.7981 13.1244V11.1709H1.58551V23.6896C1.58551 24.214 2.0126 24.6462 2.5293 24.6462H20.3305C20.5184 25.2051 20.7547 25.7412 21.0336 26.2503H2.23879C1.00811 26.2503 0 25.2329 0 23.9848V2.2692C0 1.01813 1.00449 0 2.23879 0ZM5.6425 21.2805C5.12797 21.2805 4.711 20.8579 4.711 20.3363C4.711 19.8155 5.12797 19.3922 5.6425 19.3922H14.1178C14.6323 19.3922 15.0493 19.8155 15.0493 20.3363C15.0493 20.8579 14.6323 21.2805 14.1178 21.2805H5.6425ZM5.6425 16.7487C5.12797 16.7487 4.711 16.3253 4.711 15.8045C4.711 15.283 5.12797 14.8604 5.6425 14.8604H8.17758C8.69211 14.8604 9.10908 15.283 9.10908 15.8045C9.10908 16.3253 8.69211 16.7487 8.17758 16.7487H5.6425ZM10.9974 16.7487C10.4829 16.7487 10.0659 16.3253 10.0659 15.8045C10.0659 15.283 10.4829 14.8604 10.9974 14.8604H12.8438C13.3583 14.8604 13.7753 15.283 13.7753 15.8045C13.7753 16.3253 13.3583 16.7487 12.8438 16.7487H10.9974ZM15.8175 16.7487C15.303 16.7487 14.886 16.3253 14.886 15.8045C14.886 15.283 15.303 14.8604 15.8175 14.8604H17.6545C18.1683 14.8604 18.586 15.283 18.586 15.8045C18.586 16.3253 18.1683 16.7487 17.6545 16.7487H15.8175ZM1.58551 5.06504H34.7945V2.56365C34.7945 2.03993 34.3674 1.60704 33.8507 1.60704H2.5293C2.0126 1.60704 1.58551 2.03993 1.58551 2.56365V5.06504ZM33.4828 20.707V22.2327C33.4824 22.3827 33.4233 22.5264 33.3187 22.6325C33.214 22.7386 33.0722 22.7984 32.9242 22.7989H30.882V24.8689C30.8813 25.1809 30.6312 25.4343 30.3234 25.4343H28.8181C28.5102 25.4336 28.2609 25.1802 28.2602 24.8689V22.7989H26.2172C25.9094 22.7974 25.6601 22.544 25.6594 22.2327V20.707C25.6608 20.3949 25.9101 20.143 26.2172 20.1415H28.2602V18.0708C28.2616 17.7588 28.511 17.5068 28.8181 17.5053H30.3234C30.6312 17.5061 30.8805 17.758 30.882 18.0708V20.1415H32.9242C33.2313 20.1422 33.4814 20.3942 33.4828 20.707Z" fill="#001F8B"/>
                    </svg>
                    <span class="new_card_text">
                        New Card
                    </span>
                </div>
            </div>
            <div class="bfree_mon_card">
                <div class="splide" id="splide">
                    <div class="splide__track">
                        <ul class="splide__list">
                            <!-- Slide items -->
                            {% for card in cards reversed %}
                            <li class="splide__slide">
                                <div class="bfree_mon_card1_main">
                                    <div class="show_hide show_and_hide{{ forloop.counter }}">
                                        <div class="show_hide_text">Show</div>
                                        <div class="svg-container">
                                            <svg id="cardo" class="cardo" width="21" height="17" viewBox="0 0 21 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="cursor: pointer;" >
                                                <path d="M3.04557 16.1254C2.86791 16.1254 2.69024 16.0576 2.55491 15.922C2.28378 15.6511 2.28378 15.2116 2.55491 14.9407L17.2923 0.203346C17.5634 -0.0677819 18.0025 -0.0677819 18.2736 0.203346C18.5447 0.474242 18.5447 0.913783 18.2736 1.18468L3.53624 15.922C3.40091 16.0576 3.22324 16.1254 3.04557 16.1254Z" fill="black"/>
                                                <path d="M5.85191 13.3118C5.73532 13.3118 5.6178 13.2824 5.51092 13.222C3.72569 12.2148 1.92542 10.6271 0.160317 8.5034C-0.0534389 8.24616 -0.0534389 7.87324 0.160317 7.61622C5.14171 1.62366 10.2385 0.0359883 15.3094 2.89717C15.4982 3.00382 15.6266 3.19259 15.656 3.40773C15.6854 3.62288 15.6125 3.83894 15.4589 3.99232L6.34281 13.1084C6.20933 13.2421 6.03166 13.3118 5.85191 13.3118ZM1.60386 8.0597C2.98541 9.655 4.3739 10.8917 5.74272 11.7458L13.803 3.68557C9.74648 1.83626 5.74272 3.27356 1.60386 8.0597Z" fill="black"/>
                                                <path d="M7.9566 11.2101C7.77269 11.2101 7.59618 11.1372 7.46594 11.007C6.67939 10.2207 6.24609 9.17501 6.24609 8.06251C6.24609 5.76649 8.11414 3.89844 10.4102 3.89844C11.5088 3.89844 12.5454 4.32248 13.329 5.09283C13.4606 5.22238 13.5355 5.39866 13.5365 5.58327C13.5374 5.76788 13.4652 5.94531 13.3354 6.07648L8.44935 11.0049C8.31934 11.1358 8.1426 11.2099 7.95799 11.2103C7.95753 11.2101 7.95707 11.2101 7.9566 11.2101ZM10.4102 5.28646C8.87941 5.28646 7.63412 6.53175 7.63412 8.06251C7.63412 8.56567 7.76691 9.04824 8.01606 9.4702L11.797 5.6566C11.3795 5.41509 10.9043 5.28646 10.4102 5.28646Z" fill="black"/>
                                                <path d="M10.4043 14.6C9.58263 14.6 8.76092 14.4841 7.93898 14.2519C7.57022 14.1478 7.35577 13.7642 7.45987 13.3952C7.56398 13.0265 7.94684 12.8113 8.31652 12.9164C11.8865 13.9248 15.5523 12.2929 19.2167 8.06244C18.2966 7.00014 17.3706 6.09283 16.458 5.36042C16.1591 5.12052 16.1112 4.68376 16.3511 4.38464C16.5912 4.08575 17.0282 4.03786 17.3269 4.27776C18.4364 5.16818 19.5579 6.29225 20.6602 7.61874C20.8742 7.87575 20.8742 8.2489 20.6602 8.50591C17.2913 12.5592 13.8515 14.6 10.4043 14.6Z" fill="black"/>
                                                <path d="M10.4137 12.2293C10.3244 12.2293 10.2356 12.2263 10.1479 12.221C9.7653 12.1976 9.47404 11.8687 9.49741 11.4858C9.521 11.1037 9.85066 10.8129 10.2326 10.8355C10.2925 10.8392 10.3529 10.8413 10.4137 10.8413C11.9445 10.8413 13.1898 9.59603 13.1898 8.06527C13.1898 8.00281 13.1877 7.94081 13.1838 7.8795C13.159 7.4971 13.4489 7.16675 13.8313 7.142C14.2165 7.11817 14.5443 7.40711 14.569 7.78951C14.5748 7.88066 14.5778 7.9725 14.5778 8.06527C14.5778 10.3613 12.7098 12.2293 10.4137 12.2293Z" fill="black"/>
                                            </svg> 
                                        </div>                       
                                    </div>
                                    <div class="bfree_mon_card1" id="mon_card{{ forloop.counter }}">
                                        <div class="bfree_mon_card1_con">
                                            <div class="bfree_mon_first">
                                                <div class="bfree_mon_first_input">$ {{card.balance}}</div>
                                            </div>
                                            <div class="bfree_mon_second">
                                                <div class="bfree_mon_second_input">{{card.card_masked_number}}</div>
                                                <div id="vgsCardnumber{{ forloop.counter }}" style="height: 0px;"></div>
                                            </div>
                                            <div class="bfree_mon_third">
                                                <div class="bfree_mon_subthird1">
                                                    <span class="valid_thru">Valid thru</span>
                                                    <div class="valid_thru_input">{{card.card_expiration_date}}</div>
                                                </div>
                                                <div class="bfree_mon_subthird1">
                                                    <span class="cvv">CVV</span>
                                                    <div class="cvv_input">***</div>
                                                </div>
                                            </div>
                                            <div class="bfree_mon_fourth">
                                                <div class="name_input">{{request.user.first_name}} {{request.user.last_name}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <script>
                                document.addEventListener('DOMContentLoaded', function() {
                                var fetchedShow{{ forloop.counter }} = false;
                                const svgCardContent{{ forloop.counter }} = `
                                    {% if card.brand == "Visa" %}
                                    <svg width="298" height="181" viewBox="0 0 298 181" fill="" xmlns="http://www.w3.org/2000/svg" id="svg-background">
                                        <rect width="296" height="180.568" rx="17.3148" fill="{{card.card_color}}"/>
                                        <mask id="mask0_5061_13247" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="1" y="0" width="297" height="181">
                                        <rect x="1.64844" width="296" height="180.568" rx="17.3148" fill="{{card.card_color}}"/>
                                        </mask>
                                        <g mask="url(#mask0_5061_13247)">
                                        <path d="M262.215 191.316C253.971 21.4668 -143.447 -72.527 -112.939 96.4987L-12.3485 181.422C32.1751 212.479 268.947 330.03 262.215 191.316Z" fill="url(#paint2_linear_5061_13247)" fill-opacity="0.34"/>
                                        <path d="M277.331 86H236.634C235.746 86 235 86.7102 235 87.6336V117.322C235 118.21 235.71 118.956 236.634 118.956H277.366C278.254 118.956 279 118.245 279 117.322V87.6336C278.964 86.7458 278.254 86 277.331 86Z" fill="#FFD05B"/>
                                        <path d="M267.139 95.5529V86H264.831V95.5529H249.134V86H246.826V95.5529H235V97.8967H278.964V95.5529H267.139Z" fill="#F9B54C"/>
                                        <path d="M235 109.359H246.826V118.912H249.134V109.359H264.831V118.912H267.139V109.359H278.964V107.016H235V109.359Z" fill="#F9B54C"/>
                                        </g>
                                        <path d="M245.348 149.308L238.331 166.053H233.754L230.301 152.688C230.091 151.866 229.91 151.564 229.272 151.218C228.231 150.653 226.512 150.124 225 149.793L225.103 149.308H232.472C232.953 149.308 233.419 149.48 233.785 149.793C234.151 150.105 234.394 150.539 234.468 151.015L236.293 160.706L240.799 149.308H245.348ZM263.286 160.587C263.304 156.166 257.176 155.923 257.219 153.948C257.232 153.347 257.804 152.708 259.054 152.545C260.52 152.406 261.996 152.665 263.326 153.296L264.085 149.744C262.79 149.257 261.418 149.005 260.034 149C255.754 149 252.741 151.279 252.714 154.538C252.688 156.948 254.865 158.291 256.506 159.095C258.194 159.915 258.762 160.442 258.753 161.175C258.741 162.3 257.408 162.794 256.162 162.814C253.985 162.848 252.723 162.227 251.714 161.758L250.93 165.426C251.942 165.89 253.809 166.297 255.745 166.315C260.293 166.315 263.27 164.067 263.286 160.587ZM274.587 166.053H278.593L275.099 149.308H271.401C271.006 149.305 270.618 149.42 270.29 149.639C269.961 149.858 269.705 150.171 269.556 150.537L263.06 166.053H267.607L268.511 163.551H274.067L274.587 166.053ZM269.757 160.12L272.035 153.832L273.348 160.12H269.757ZM251.535 149.308L247.956 166.053H243.624L247.208 149.308H251.535Z" fill="white"/>
                                        <path d="M219.812 24.2H221.842L218.244 34H215.934L212.336 24.2H214.394L217.096 32.054L219.812 24.2ZM224.314 24.2H226.246V34H224.314V24.2ZM233.472 24.2C235.824 24.2 236.972 25.558 236.972 27.196C236.972 28.372 236.328 29.59 234.76 30.01L237.112 34H234.872L232.716 30.164H231.344V34H229.412V24.2H233.472ZM235.012 27.238C235.012 26.356 234.508 25.782 233.402 25.782H231.344V28.722H233.402C234.508 28.722 235.012 28.134 235.012 27.238ZM239.23 24.2H247.196V25.754H244.172V34H242.254V25.754H239.23V24.2ZM249.78 24.2H251.698V30.29C251.698 31.676 252.58 32.362 253.84 32.362C255.114 32.362 255.996 31.676 255.996 30.29V24.2H257.914V30.276C257.914 32.852 255.94 34.098 253.812 34.098C251.67 34.098 249.78 32.852 249.78 30.276V24.2ZM259.753 34L263.267 24.2H266.515L270.029 34H267.999L267.215 31.704H262.553L261.755 34H259.753ZM265.171 25.754H264.597L263.071 30.192H266.697L265.171 25.754ZM274.201 24.2V32.474L278.541 32.488V34H272.269V24.2H274.201Z" fill="white"/>
                                        <defs>
                                        <linearGradient id="paint0_linear_5061_13247" x1="277.036" y1="15.6657" x2="7.7086e-07" y2="176.446" gradientUnits="userSpaceOnUse">
                                        <stop stop-color="#2647BD"/>
                                        <stop offset="1" stop-color="#1B2AB1"/>
                                        </linearGradient>
                                        <linearGradient id="paint1_linear_5061_13247" x1="278.685" y1="15.6657" x2="1.64844" y2="176.446" gradientUnits="userSpaceOnUse">
                                        <stop stop-color="#161616"/>
                                        <stop offset="1" stop-color="#242424"/>
                                        </linearGradient>
                                        <linearGradient id="paint2_linear_5061_13247" x1="223.462" y1="84.9555" x2="4.12047" y2="169.851" gradientUnits="userSpaceOnUse">
                                        <stop stop-color="#D5D5D5"/>
                                        <stop offset="0.788762" stop-color="#818181" stop-opacity="0"/>
                                        </linearGradient>
                                        </defs>
                                    </svg>
                                    {% else %}
                                    <svg width="296" height="181" viewBox="0 0 296 181" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <rect width="296" height="180.568" rx="17.3148" fill="{{card.card_color}}"/>
                                        <mask id="mask0_11968_83487" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="1" y="0" width="297" height="181">
                                        <rect x="1.64844" width="296" height="180.568" rx="17.3148" fill="{{card.card_color}}"/>
                                        </mask>
                                        <g mask="url(#mask0_11968_83487)">
                                        <path d="M262.217 191.315C253.973 21.4658 -143.445 -72.528 -112.937 96.4977L-12.3466 181.421C32.1771 212.478 268.949 330.029 262.217 191.315Z" fill="url(#paint2_linear_11968_83487)" fill-opacity="0.34"/>
                                        <path d="M277.331 86H236.634C235.746 86 235 86.7102 235 87.6336V117.322C235 118.21 235.71 118.956 236.634 118.956H277.366C278.254 118.956 279 118.245 279 117.322V87.6336C278.964 86.7458 278.254 86 277.331 86Z" fill="#FFD05B"/>
                                        <path d="M267.139 95.5529V86H264.831V95.5529H249.134V86H246.826V95.5529H235V97.8967H278.964V95.5529H267.139Z" fill="#F9B54C"/>
                                        <path d="M235 109.36H246.826V118.913H249.134V109.36H264.831V118.913H267.139V109.36H278.964V107.017H235V109.36Z" fill="#F9B54C"/>
                                        </g>
                                        <g clip-path="url(#clip0_11968_83487)">
                                        <path d="M243.004 165.839V163.721C243.004 162.909 242.476 162.38 241.571 162.38C241.118 162.38 240.628 162.521 240.288 162.98C240.024 162.592 239.647 162.38 239.081 162.38C238.704 162.38 238.327 162.486 238.025 162.874V162.451H237.232V165.839H238.025V163.968C238.025 163.369 238.364 163.086 238.892 163.086C239.42 163.086 239.685 163.404 239.685 163.968V165.839H240.477V163.968C240.477 163.369 240.854 163.086 241.344 163.086C241.873 163.086 242.136 163.404 242.136 163.968V165.839H243.004ZM254.736 162.451H253.454V161.427H252.662V162.451H251.945V163.121H252.661V164.675C252.661 165.451 253.001 165.91 253.906 165.91C254.246 165.91 254.623 165.804 254.887 165.663L254.661 165.028C254.434 165.169 254.171 165.204 253.982 165.204C253.605 165.204 253.454 164.992 253.454 164.639V163.121H254.736V162.451ZM261.451 162.38C260.999 162.38 260.697 162.592 260.508 162.874V162.451H259.716V165.839H260.508V163.933C260.508 163.369 260.772 163.051 261.263 163.051C261.413 163.051 261.602 163.086 261.753 163.121L261.979 162.415C261.828 162.38 261.602 162.38 261.451 162.38M251.303 162.733C250.926 162.486 250.398 162.38 249.832 162.38C248.927 162.38 248.323 162.804 248.323 163.474C248.323 164.039 248.776 164.357 249.568 164.463L249.945 164.498C250.36 164.569 250.587 164.675 250.587 164.851C250.587 165.098 250.285 165.275 249.757 165.275C249.228 165.275 248.814 165.098 248.55 164.922L248.172 165.487C248.587 165.769 249.153 165.91 249.719 165.91C250.775 165.91 251.379 165.451 251.379 164.816C251.379 164.216 250.888 163.898 250.134 163.792L249.757 163.757C249.417 163.721 249.153 163.651 249.153 163.439C249.153 163.192 249.417 163.051 249.832 163.051C250.285 163.051 250.738 163.227 250.964 163.333L251.303 162.733ZM272.353 162.38C271.901 162.38 271.599 162.592 271.41 162.874V162.451H270.618V165.84H271.41V163.933C271.41 163.369 271.674 163.051 272.165 163.051C272.316 163.051 272.504 163.086 272.655 163.122L272.882 162.416C272.731 162.38 272.504 162.38 272.353 162.38ZM262.243 164.145C262.243 165.169 262.998 165.91 264.167 165.91C264.695 165.91 265.073 165.804 265.45 165.522L265.073 164.922C264.771 165.134 264.469 165.239 264.13 165.239C263.488 165.239 263.036 164.816 263.036 164.145C263.036 163.51 263.488 163.086 264.13 163.051C264.469 163.051 264.771 163.157 265.073 163.369L265.45 162.769C265.073 162.486 264.695 162.38 264.167 162.38C262.998 162.38 262.243 163.122 262.243 164.145ZM269.562 164.145V162.451H268.77V162.874C268.506 162.557 268.128 162.38 267.638 162.38C266.619 162.38 265.827 163.122 265.827 164.145C265.827 165.169 266.619 165.91 267.638 165.91C268.166 165.91 268.543 165.734 268.77 165.416V165.84H269.562V164.145ZM266.657 164.145C266.657 163.545 267.072 163.051 267.751 163.051C268.392 163.051 268.845 163.51 268.845 164.145C268.845 164.745 268.392 165.239 267.751 165.239C267.072 165.204 266.657 164.745 266.657 164.145ZM257.188 162.38C256.132 162.38 255.378 163.086 255.378 164.145C255.378 165.204 256.132 165.91 257.226 165.91C257.754 165.91 258.282 165.769 258.697 165.451L258.32 164.922C258.018 165.134 257.641 165.275 257.264 165.275C256.773 165.275 256.283 165.063 256.17 164.463H258.848V164.181C258.886 163.086 258.207 162.38 257.188 162.38ZM257.188 163.016C257.679 163.016 258.018 163.298 258.094 163.828H256.207C256.283 163.369 256.622 163.016 257.188 163.016ZM276.842 164.145V161.109H276.05V162.874C275.786 162.557 275.409 162.38 274.918 162.38C273.9 162.38 273.108 163.122 273.108 164.145C273.108 165.169 273.9 165.91 274.918 165.91C275.447 165.91 275.824 165.734 276.05 165.416V165.84H276.842V164.145ZM273.938 164.145C273.938 163.545 274.353 163.051 275.032 163.051C275.673 163.051 276.126 163.51 276.126 164.145C276.126 164.745 275.673 165.239 275.032 165.239C274.353 165.204 273.938 164.745 273.938 164.145ZM247.455 164.145V162.451H246.663V162.874C246.399 162.557 246.022 162.38 245.531 162.38C244.513 162.38 243.721 163.122 243.721 164.145C243.721 165.169 244.513 165.91 245.531 165.91C246.06 165.91 246.437 165.734 246.663 165.416V165.84H247.455V164.145ZM244.513 164.145C244.513 163.545 244.928 163.051 245.607 163.051C246.248 163.051 246.701 163.51 246.701 164.145C246.701 164.745 246.248 165.239 245.607 165.239C244.928 165.204 244.513 164.745 244.513 164.145Z" fill="white"/>
                                        <path d="M251.035 136.719H262.918V156.699H251.035V136.719Z" fill="#FF5F00"/>
                                        <path d="M251.793 146.708C251.793 142.649 253.83 139.048 256.961 136.718C254.66 135.024 251.755 134 248.587 134C241.079 134 235.006 139.683 235.006 146.708C235.006 153.733 241.079 159.416 248.586 159.416C251.755 159.416 254.66 158.393 256.961 156.698C253.83 154.404 251.793 150.768 251.793 146.708Z" fill="#EB001B"/>
                                        <path d="M278.951 146.708C278.951 153.733 272.878 159.416 265.371 159.416C262.202 159.416 259.297 158.393 256.996 156.698C260.165 154.368 262.164 150.768 262.164 146.708C262.164 142.649 260.127 139.048 256.996 136.718C259.297 135.024 262.202 134 265.371 134C272.878 134 278.951 139.719 278.951 146.708Z" fill="#F79E1B"/>
                                        </g>
                                        <path d="M212.171 24.0244H214.126L216.396 29.9922L218.665 24.0244H220.627L217.236 33H215.555L212.171 24.0244ZM222.82 24.0244H224.748V33H222.82V24.0244ZM227.659 24.0244H230.612C231.51 24.0244 232.219 24.2614 232.738 24.7354C233.262 25.2093 233.524 25.8496 233.524 26.6562C233.524 27.1165 233.403 27.5951 233.162 28.0918C232.925 28.5885 232.485 28.9782 231.843 29.2607L234.351 33H232.136L229.812 29.5273H229.594V33H227.659V24.0244ZM229.607 25.624V27.9619H230.024C231.031 27.9619 231.535 27.5495 231.535 26.7246C231.535 26.3874 231.403 26.1208 231.138 25.9248C230.879 25.7243 230.516 25.624 230.052 25.624H229.607ZM236.203 24.0244H242.239V25.9316H240.181V33H238.247V25.9316H236.203V24.0244ZM244.651 24.0244H246.558V29.5137C246.558 30.0241 246.699 30.4342 246.982 30.7441C247.265 31.054 247.636 31.209 248.096 31.209C248.625 31.209 249.035 31.054 249.327 30.7441C249.618 30.4297 249.764 29.9876 249.764 29.418V24.0244H251.665V29.835C251.665 30.3454 251.532 30.8763 251.268 31.4277C251.004 31.9746 250.596 32.3939 250.044 32.6855C249.498 32.9772 248.885 33.123 248.206 33.123C246.975 33.123 246.075 32.7812 245.505 32.0977C244.936 31.4095 244.651 30.6872 244.651 29.9307V24.0244ZM257.481 24.0244H258.978L262.642 33H260.701L259.969 31.2363H256.531L255.827 33H253.892L257.481 24.0244ZM258.233 26.9639L257.187 29.6094H259.313L258.233 26.9639ZM265.17 24.0244H267.091V31.0654H269.737V33H265.17V24.0244Z" fill="white"/>
                                        <defs>
                                        <linearGradient id="paint0_linear_11968_83487" x1="277.036" y1="15.6657" x2="7.7086e-07" y2="176.446" gradientUnits="userSpaceOnUse">
                                        <stop stop-color="#2647BD"/>
                                        <stop offset="1" stop-color="#1B2AB1"/>
                                        </linearGradient>
                                        <linearGradient id="paint1_linear_11968_83487" x1="278.685" y1="15.6657" x2="1.64844" y2="176.446" gradientUnits="userSpaceOnUse">
                                        <stop stop-color="#161616"/>
                                        <stop offset="1" stop-color="#242424"/>
                                        </linearGradient>
                                        <linearGradient id="paint2_linear_11968_83487" x1="223.464" y1="84.9545" x2="4.12242" y2="169.85" gradientUnits="userSpaceOnUse">
                                        <stop stop-color="#D5D5D5"/>
                                        <stop offset="0.788762" stop-color="#818181" stop-opacity="0"/>
                                        </linearGradient>
                                        <clipPath id="clip0_11968_83487">
                                        <rect width="44" height="32" fill="white" transform="translate(235 134)"/>
                                        </clipPath>
                                        </defs>
                                    </svg>
                                    {% endif %}
                                `;
                                const mon_card{{ forloop.counter }} = document.getElementById('mon_card{{ forloop.counter }}');
                                mon_card{{ forloop.counter }}.style.backgroundImage= `url('data:image/svg+xml,${encodeURIComponent(svgCardContent{{ forloop.counter }})}')`;
                                
                                const showHide{{ forloop.counter }} = document.querySelector('.show_and_hide{{ forloop.counter }}');

                                showHide{{ forloop.counter }}.addEventListener('click', () => {
                                    const showHideText = showHide{{ forloop.counter }}.querySelector('.show_hide_text');
                                    const svgContainer = showHide{{ forloop.counter }}.querySelector('.svg-container');

                                    if (showHideText.textContent === 'Show') {
                                        showHideText.textContent = 'Hide';
                                        mon_card{{ forloop.counter }}.querySelector('.bfree_mon_second_input').textContent = '{{card.card_number}}'
                                        mon_card{{ forloop.counter }}.querySelector('.cvv_input').textContent = '{{card.card_cvv}}'
                                        formatSecondInputs(secondInputs);
                                        svgContainer.innerHTML = '<svg width="21" height="14" viewBox="0 0 21 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.4609 13.1405C7.00435 13.1405 3.53925 11.0799 0.161097 7.01598C-0.053699 6.75748 -0.053699 6.38275 0.161097 6.12425C3.53925 2.06056 7.00435 0 10.4609 0C13.9171 0 17.3824 2.06056 20.7606 6.12425C20.9756 6.38275 20.9756 6.75748 20.7606 7.01598C17.3824 11.0797 13.9171 13.1405 10.4609 13.1405ZM1.6119 6.57011C4.5865 10.005 7.56157 11.7457 10.4609 11.7457C13.3604 11.7457 16.3352 10.0052 19.3098 6.57011C16.3352 3.13523 13.3604 1.39478 10.4609 1.39478C7.56157 1.39478 4.5865 3.13523 1.6119 6.57011Z" fill="black"/><path d="M10.4636 10.5288C8.28448 10.5288 6.51172 8.75599 6.51172 6.57688C6.51172 4.39777 8.28448 2.625 10.4636 2.625C12.6427 2.625 14.4155 4.39777 14.4155 6.57688C14.4155 8.75599 12.6427 10.5288 10.4636 10.5288ZM10.4636 4.01978C9.05371 4.01978 7.9065 5.16699 7.9065 6.57688C7.9065 7.98677 9.05371 9.13397 10.4636 9.13397C11.8735 9.13397 13.0207 7.98677 13.0207 6.57688C13.0207 5.16699 11.8735 4.01978 10.4636 4.01978Z" fill="black"/></svg>';
                                    } else {
                                        showHideText.textContent = 'Show';
                                        mon_card{{ forloop.counter }}.querySelector('.bfree_mon_second_input').textContent = '{{card.card_masked_number}}'
                                        mon_card{{ forloop.counter }}.querySelector('.cvv_input').textContent = '***'
                                        formatSecondInputs(secondInputs);
                                        svgContainer.innerHTML = '<svg width="21" height="17" viewBox="0 0 21 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.04557 16.1254C2.86791 16.1254 2.69024 16.0576 2.55491 15.922C2.28378 15.6511 2.28378 15.2116 2.55491 14.9407L17.2923 0.203346C17.5634 -0.0677819 18.0025 -0.0677819 18.2736 0.203346C18.5447 0.474242 18.5447 0.913783 18.2736 1.18468L3.53624 15.922C3.40091 16.0576 3.22324 16.1254 3.04557 16.1254Z" fill="black"/><path d="M5.85191 13.3118C5.73532 13.3118 5.6178 13.2824 5.51092 13.222C3.72569 12.2148 1.92542 10.6271 0.160317 8.5034C-0.0534389 8.24616 -0.0534389 7.87324 0.160317 7.61622C5.14171 1.62366 10.2385 0.0359883 15.3094 2.89717C15.4982 3.00382 15.6266 3.19259 15.656 3.40773C15.6854 3.62288 15.6125 3.83894 15.4589 3.99232L6.34281 13.1084C6.20933 13.2421 6.03166 13.3118 5.85191 13.3118ZM1.60386 8.0597C2.98541 9.655 4.3739 10.8917 5.74272 11.7458L13.803 3.68557C9.74648 1.83626 5.74272 3.27356 1.60386 8.0597Z" fill="black"/><path d="M7.9566 11.2101C7.77269 11.2101 7.59618 11.1372 7.46594 11.007C6.67939 10.2207 6.24609 9.17501 6.24609 8.06251C6.24609 5.76649 8.11414 3.89844 10.4102 3.89844C11.5088 3.89844 12.5454 4.32248 13.329 5.09283C13.4606 5.22238 13.5355 5.39866 13.5365 5.58327C13.5374 5.76788 13.4652 5.94531 13.3354 6.07648L8.44935 11.0049C8.31934 11.1358 8.1426 11.2099 7.95799 11.2103C7.95753 11.2101 7.95707 11.2101 7.9566 11.2101ZM10.4102 5.28646C8.87941 5.28646 7.63412 6.53175 7.63412 8.06251C7.63412 8.56567 7.76691 9.04824 8.01606 9.4702L11.797 5.6566C11.3795 5.41509 10.9043 5.28646 10.4102 5.28646Z" fill="black"/><path d="M10.4043 14.6C9.58263 14.6 8.76092 14.4841 7.93898 14.2519C7.57022 14.1478 7.35577 13.7642 7.45987 13.3952C7.56398 13.0265 7.94684 12.8113 8.31652 12.9164C11.8865 13.9248 15.5523 12.2929 19.2167 8.06244C18.2966 7.00014 17.3706 6.09283 16.458 5.36042C16.1591 5.12052 16.1112 4.68376 16.3511 4.38464C16.5912 4.08575 17.0282 4.03786 17.3269 4.27776C18.4364 5.16818 19.5579 6.29225 20.6602 7.61874C20.8742 7.87575 20.8742 8.2489 20.6602 8.50591C17.2913 12.5592 13.8515 14.6 10.4043 14.6Z" fill="black"/><path d="M10.4137 12.2293C10.3244 12.2293 10.2356 12.2263 10.1479 12.221C9.7653 12.1976 9.47404 11.8687 9.49741 11.4858C9.521 11.1037 9.85066 10.8129 10.2326 10.8355C10.2925 10.8392 10.3529 10.8413 10.4137 10.8413C11.9445 10.8413 13.1898 9.59603 13.1898 8.06527C13.1898 8.00281 13.1877 7.94081 13.1838 7.8795C13.159 7.4971 13.4489 7.16675 13.8313 7.142C14.2165 7.11817 14.5443 7.40711 14.569 7.78951C14.5748 7.88066 14.5778 7.9725 14.5778 8.06527C14.5778 10.3613 12.7098 12.2293 10.4137 12.2293Z" fill="black"/></svg>';
                                    }
                                });
                            });
                            </script>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            <table class="bfree_card_table">
                <thead class="bfree_card_thead">
                    <tr class="bfree_card_thead_tr">
                      <th>
                        <h5>Name on Card</h5>
                      </th>
                      <th>
                        <h5>Status</h5>
                      </th>
                      <th>
                        <h5>Brand</h5>
                      </th>
                      <th>
                        <h5>Creation Date</h5>
                      </th>
                      <th>
                        <h5>Currency</h5>
                      </th>
                      <th>
                        <h5>Card Number</h5>
                      </th>
                    </tr>
                </thead>
                <tbody class="bfree_card_body">
                    {% for card in cards reversed %}
                    <tr class="bfree_card_body_tr">
                        <td>{{request.user.first_name}} {{request.user.last_name}}</td>
                        <td id="card_status{{forloop.counter}}">{% if card.state == 'Active' %}Active{% else %}Frozen{% endif %}</td>
                        <td>{{card.brand}}</td>
                        <td class="creation-date" data-timestamp="{{ card.creation_date|date:'Y-m-d H:i:s.uO' }}"></td>
                        <td>USD</td>
                        <td>{{card.card_masked_number}}</td>
                        <td style="cursor: pointer;">
                            <a class="card_details" id="card_details{{forloop.counter}}">
                                Details
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div id="overlay" class="overlay" onclick="closeDetails()"></div>
    <div class="absolute">
        {% for card in cards reversed %}
        <div class="card_modals" id="cards{{forloop.counter}}" style="display: none;">
            <div class="card_modal" >
                <div class="card_submmodal">
                    <div class="card_submodal_header">
                        <span class="card_submodal_header_text">
                            Card Details
                        </span>
                        <svg class="proproom-content-head2"id="proproom-content-head2" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none" style="cursor: pointer;" onclick="closeDetails()">
                            <path d="M8.59375 7.49994L14.7734 1.32021C15.0755 1.0182 15.0755 0.528522 14.7735 0.226509C14.4713 -0.0755032 13.9817 -0.0755032 13.6797 0.226509L7.50006 6.40623L1.32041 0.226509C1.0184 -0.0755032 0.528669 -0.0755032 0.226548 0.226509C-0.0755717 0.528522 -0.0754606 1.01826 0.226548 1.32033L6.4062 7.50005L0.226548 13.6797C-0.0754606 13.9817 -0.0754606 14.4714 0.226548 14.7735C0.377581 14.9245 0.57553 15 0.773423 15C0.971371 15 1.16932 14.9245 1.3203 14.7735L7.49995 8.59375L13.6796 14.7735C13.8306 14.9245 14.0286 15 14.2265 15C14.4244 15 14.6224 14.9245 14.7733 14.7735C15.0754 14.4715 15.0754 13.9817 14.7733 13.6797L8.59375 7.49994Z" fill="black"/>
                        </svg>
                    </div>
                    <div class="card_submmodal_content">
                        <div class="card_submmodal_subcontent">
                            <div class="card_submodal_subcontents">
                                <div class="card_submmodal_subcontent1">
                                    <span class="subcontent1_text">
                                        1. Minimum amount to fund a card is $3, and the maximum is $10,000.
                                    </span>
                                    <span class="subcontent1_text">
                                        2. A ${{maintenance_fee}} monthly maintenance fee will be deducted from your card.
                                    </span>
                                    <span class="subcontent1_text">
                                        3. If the full maintenance fee cannot be deducted from your card, the remaining balance will be deducted from your wallet.
                                    </span>
                                    <span class="subcontent1_text">
                                        4. If the maintenance fee cannot be deducted, your card will be deleted.
                                    </span>
                                </div>
                                <div class="card_submmodal_subcontent2">
                                    <div class="subcon2_image" id="subcon_card{{forloop.counter}}">
                                        <div class="bfree_mon_card1_con">
                                            <div class="bfree_mon_first">
                                                <div placeholder="" class="bfree_mon_first_input">$ {{card.balance}}</div>
                                            </div>
                                            <div class="bfree_mon_second">
                                                <div placeholder="" class="bfree_mon_second_input">{{card.card_number}}</div>
                                            </div>
                                            <div class="bfree_mon_third">
                                                <div class="bfree_mon_subthird1">
                                                    <span class="valid_thru">Valid thru</span>
                                                    <div placeholder="" class="valid_thru_input">{{card.card_expiration_date}}</div>
                                                </div>
                                                <div class="bfree_mon_subthird1">
                                                    <span class="cvv">CVV</span>
                                                    <div placeholder=""  class="cvv_input">{{card.card_cvv}}</div>
                                                </div>
                                            </div>
                                            <div class="bfree_mon_fourth">
                                                <div placeholder="" class="name_input">{{ request.user.first_name }} {{ request.user.last_name }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                        const svgSubconCardContent{{ forloop.counter }} = `
                                            {% if card.brand == "Visa" %}
                                            <svg width="298" height="181" viewBox="0 0 298 181" fill="" xmlns="http://www.w3.org/2000/svg" id="svg-background">
                                                <rect width="296" height="180.568" rx="17.3148" fill="{{card.card_color}}"/>
                                                <mask id="mask0_5061_13247" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="1" y="0" width="297" height="181">
                                                <rect x="1.64844" width="296" height="180.568" rx="17.3148" fill="{{card.card_color}}"/>
                                                </mask>
                                                <g mask="url(#mask0_5061_13247)">
                                                <path d="M262.215 191.316C253.971 21.4668 -143.447 -72.527 -112.939 96.4987L-12.3485 181.422C32.1751 212.479 268.947 330.03 262.215 191.316Z" fill="url(#paint2_linear_5061_13247)" fill-opacity="0.34"/>
                                                <path d="M277.331 86H236.634C235.746 86 235 86.7102 235 87.6336V117.322C235 118.21 235.71 118.956 236.634 118.956H277.366C278.254 118.956 279 118.245 279 117.322V87.6336C278.964 86.7458 278.254 86 277.331 86Z" fill="#FFD05B"/>
                                                <path d="M267.139 95.5529V86H264.831V95.5529H249.134V86H246.826V95.5529H235V97.8967H278.964V95.5529H267.139Z" fill="#F9B54C"/>
                                                <path d="M235 109.359H246.826V118.912H249.134V109.359H264.831V118.912H267.139V109.359H278.964V107.016H235V109.359Z" fill="#F9B54C"/>
                                                </g>
                                                <path d="M245.348 149.308L238.331 166.053H233.754L230.301 152.688C230.091 151.866 229.91 151.564 229.272 151.218C228.231 150.653 226.512 150.124 225 149.793L225.103 149.308H232.472C232.953 149.308 233.419 149.48 233.785 149.793C234.151 150.105 234.394 150.539 234.468 151.015L236.293 160.706L240.799 149.308H245.348ZM263.286 160.587C263.304 156.166 257.176 155.923 257.219 153.948C257.232 153.347 257.804 152.708 259.054 152.545C260.52 152.406 261.996 152.665 263.326 153.296L264.085 149.744C262.79 149.257 261.418 149.005 260.034 149C255.754 149 252.741 151.279 252.714 154.538C252.688 156.948 254.865 158.291 256.506 159.095C258.194 159.915 258.762 160.442 258.753 161.175C258.741 162.3 257.408 162.794 256.162 162.814C253.985 162.848 252.723 162.227 251.714 161.758L250.93 165.426C251.942 165.89 253.809 166.297 255.745 166.315C260.293 166.315 263.27 164.067 263.286 160.587ZM274.587 166.053H278.593L275.099 149.308H271.401C271.006 149.305 270.618 149.42 270.29 149.639C269.961 149.858 269.705 150.171 269.556 150.537L263.06 166.053H267.607L268.511 163.551H274.067L274.587 166.053ZM269.757 160.12L272.035 153.832L273.348 160.12H269.757ZM251.535 149.308L247.956 166.053H243.624L247.208 149.308H251.535Z" fill="white"/>
                                                <path d="M219.812 24.2H221.842L218.244 34H215.934L212.336 24.2H214.394L217.096 32.054L219.812 24.2ZM224.314 24.2H226.246V34H224.314V24.2ZM233.472 24.2C235.824 24.2 236.972 25.558 236.972 27.196C236.972 28.372 236.328 29.59 234.76 30.01L237.112 34H234.872L232.716 30.164H231.344V34H229.412V24.2H233.472ZM235.012 27.238C235.012 26.356 234.508 25.782 233.402 25.782H231.344V28.722H233.402C234.508 28.722 235.012 28.134 235.012 27.238ZM239.23 24.2H247.196V25.754H244.172V34H242.254V25.754H239.23V24.2ZM249.78 24.2H251.698V30.29C251.698 31.676 252.58 32.362 253.84 32.362C255.114 32.362 255.996 31.676 255.996 30.29V24.2H257.914V30.276C257.914 32.852 255.94 34.098 253.812 34.098C251.67 34.098 249.78 32.852 249.78 30.276V24.2ZM259.753 34L263.267 24.2H266.515L270.029 34H267.999L267.215 31.704H262.553L261.755 34H259.753ZM265.171 25.754H264.597L263.071 30.192H266.697L265.171 25.754ZM274.201 24.2V32.474L278.541 32.488V34H272.269V24.2H274.201Z" fill="white"/>
                                                <defs>
                                                <linearGradient id="paint0_linear_5061_13247" x1="277.036" y1="15.6657" x2="7.7086e-07" y2="176.446" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#2647BD"/>
                                                <stop offset="1" stop-color="#1B2AB1"/>
                                                </linearGradient>
                                                <linearGradient id="paint1_linear_5061_13247" x1="278.685" y1="15.6657" x2="1.64844" y2="176.446" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#161616"/>
                                                <stop offset="1" stop-color="#242424"/>
                                                </linearGradient>
                                                <linearGradient id="paint2_linear_5061_13247" x1="223.462" y1="84.9555" x2="4.12047" y2="169.851" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#D5D5D5"/>
                                                <stop offset="0.788762" stop-color="#818181" stop-opacity="0"/>
                                                </linearGradient>
                                                </defs>
                                            </svg>
                                            {% else %}
                                            <svg width="296" height="181" viewBox="0 0 296 181" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect width="296" height="180.568" rx="17.3148" fill="{{card.card_color}}"/>
                                                <mask id="mask0_11968_83487" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="1" y="0" width="297" height="181">
                                                <rect x="1.64844" width="296" height="180.568" rx="17.3148" fill="{{card.card_color}}"/>
                                                </mask>
                                                <g mask="url(#mask0_11968_83487)">
                                                <path d="M262.217 191.315C253.973 21.4658 -143.445 -72.528 -112.937 96.4977L-12.3466 181.421C32.1771 212.478 268.949 330.029 262.217 191.315Z" fill="url(#paint2_linear_11968_83487)" fill-opacity="0.34"/>
                                                <path d="M277.331 86H236.634C235.746 86 235 86.7102 235 87.6336V117.322C235 118.21 235.71 118.956 236.634 118.956H277.366C278.254 118.956 279 118.245 279 117.322V87.6336C278.964 86.7458 278.254 86 277.331 86Z" fill="#FFD05B"/>
                                                <path d="M267.139 95.5529V86H264.831V95.5529H249.134V86H246.826V95.5529H235V97.8967H278.964V95.5529H267.139Z" fill="#F9B54C"/>
                                                <path d="M235 109.36H246.826V118.913H249.134V109.36H264.831V118.913H267.139V109.36H278.964V107.017H235V109.36Z" fill="#F9B54C"/>
                                                </g>
                                                <g clip-path="url(#clip0_11968_83487)">
                                                <path d="M243.004 165.839V163.721C243.004 162.909 242.476 162.38 241.571 162.38C241.118 162.38 240.628 162.521 240.288 162.98C240.024 162.592 239.647 162.38 239.081 162.38C238.704 162.38 238.327 162.486 238.025 162.874V162.451H237.232V165.839H238.025V163.968C238.025 163.369 238.364 163.086 238.892 163.086C239.42 163.086 239.685 163.404 239.685 163.968V165.839H240.477V163.968C240.477 163.369 240.854 163.086 241.344 163.086C241.873 163.086 242.136 163.404 242.136 163.968V165.839H243.004ZM254.736 162.451H253.454V161.427H252.662V162.451H251.945V163.121H252.661V164.675C252.661 165.451 253.001 165.91 253.906 165.91C254.246 165.91 254.623 165.804 254.887 165.663L254.661 165.028C254.434 165.169 254.171 165.204 253.982 165.204C253.605 165.204 253.454 164.992 253.454 164.639V163.121H254.736V162.451ZM261.451 162.38C260.999 162.38 260.697 162.592 260.508 162.874V162.451H259.716V165.839H260.508V163.933C260.508 163.369 260.772 163.051 261.263 163.051C261.413 163.051 261.602 163.086 261.753 163.121L261.979 162.415C261.828 162.38 261.602 162.38 261.451 162.38M251.303 162.733C250.926 162.486 250.398 162.38 249.832 162.38C248.927 162.38 248.323 162.804 248.323 163.474C248.323 164.039 248.776 164.357 249.568 164.463L249.945 164.498C250.36 164.569 250.587 164.675 250.587 164.851C250.587 165.098 250.285 165.275 249.757 165.275C249.228 165.275 248.814 165.098 248.55 164.922L248.172 165.487C248.587 165.769 249.153 165.91 249.719 165.91C250.775 165.91 251.379 165.451 251.379 164.816C251.379 164.216 250.888 163.898 250.134 163.792L249.757 163.757C249.417 163.721 249.153 163.651 249.153 163.439C249.153 163.192 249.417 163.051 249.832 163.051C250.285 163.051 250.738 163.227 250.964 163.333L251.303 162.733ZM272.353 162.38C271.901 162.38 271.599 162.592 271.41 162.874V162.451H270.618V165.84H271.41V163.933C271.41 163.369 271.674 163.051 272.165 163.051C272.316 163.051 272.504 163.086 272.655 163.122L272.882 162.416C272.731 162.38 272.504 162.38 272.353 162.38ZM262.243 164.145C262.243 165.169 262.998 165.91 264.167 165.91C264.695 165.91 265.073 165.804 265.45 165.522L265.073 164.922C264.771 165.134 264.469 165.239 264.13 165.239C263.488 165.239 263.036 164.816 263.036 164.145C263.036 163.51 263.488 163.086 264.13 163.051C264.469 163.051 264.771 163.157 265.073 163.369L265.45 162.769C265.073 162.486 264.695 162.38 264.167 162.38C262.998 162.38 262.243 163.122 262.243 164.145ZM269.562 164.145V162.451H268.77V162.874C268.506 162.557 268.128 162.38 267.638 162.38C266.619 162.38 265.827 163.122 265.827 164.145C265.827 165.169 266.619 165.91 267.638 165.91C268.166 165.91 268.543 165.734 268.77 165.416V165.84H269.562V164.145ZM266.657 164.145C266.657 163.545 267.072 163.051 267.751 163.051C268.392 163.051 268.845 163.51 268.845 164.145C268.845 164.745 268.392 165.239 267.751 165.239C267.072 165.204 266.657 164.745 266.657 164.145ZM257.188 162.38C256.132 162.38 255.378 163.086 255.378 164.145C255.378 165.204 256.132 165.91 257.226 165.91C257.754 165.91 258.282 165.769 258.697 165.451L258.32 164.922C258.018 165.134 257.641 165.275 257.264 165.275C256.773 165.275 256.283 165.063 256.17 164.463H258.848V164.181C258.886 163.086 258.207 162.38 257.188 162.38ZM257.188 163.016C257.679 163.016 258.018 163.298 258.094 163.828H256.207C256.283 163.369 256.622 163.016 257.188 163.016ZM276.842 164.145V161.109H276.05V162.874C275.786 162.557 275.409 162.38 274.918 162.38C273.9 162.38 273.108 163.122 273.108 164.145C273.108 165.169 273.9 165.91 274.918 165.91C275.447 165.91 275.824 165.734 276.05 165.416V165.84H276.842V164.145ZM273.938 164.145C273.938 163.545 274.353 163.051 275.032 163.051C275.673 163.051 276.126 163.51 276.126 164.145C276.126 164.745 275.673 165.239 275.032 165.239C274.353 165.204 273.938 164.745 273.938 164.145ZM247.455 164.145V162.451H246.663V162.874C246.399 162.557 246.022 162.38 245.531 162.38C244.513 162.38 243.721 163.122 243.721 164.145C243.721 165.169 244.513 165.91 245.531 165.91C246.06 165.91 246.437 165.734 246.663 165.416V165.84H247.455V164.145ZM244.513 164.145C244.513 163.545 244.928 163.051 245.607 163.051C246.248 163.051 246.701 163.51 246.701 164.145C246.701 164.745 246.248 165.239 245.607 165.239C244.928 165.204 244.513 164.745 244.513 164.145Z" fill="white"/>
                                                <path d="M251.035 136.719H262.918V156.699H251.035V136.719Z" fill="#FF5F00"/>
                                                <path d="M251.793 146.708C251.793 142.649 253.83 139.048 256.961 136.718C254.66 135.024 251.755 134 248.587 134C241.079 134 235.006 139.683 235.006 146.708C235.006 153.733 241.079 159.416 248.586 159.416C251.755 159.416 254.66 158.393 256.961 156.698C253.83 154.404 251.793 150.768 251.793 146.708Z" fill="#EB001B"/>
                                                <path d="M278.951 146.708C278.951 153.733 272.878 159.416 265.371 159.416C262.202 159.416 259.297 158.393 256.996 156.698C260.165 154.368 262.164 150.768 262.164 146.708C262.164 142.649 260.127 139.048 256.996 136.718C259.297 135.024 262.202 134 265.371 134C272.878 134 278.951 139.719 278.951 146.708Z" fill="#F79E1B"/>
                                                </g>
                                                <path d="M212.171 24.0244H214.126L216.396 29.9922L218.665 24.0244H220.627L217.236 33H215.555L212.171 24.0244ZM222.82 24.0244H224.748V33H222.82V24.0244ZM227.659 24.0244H230.612C231.51 24.0244 232.219 24.2614 232.738 24.7354C233.262 25.2093 233.524 25.8496 233.524 26.6562C233.524 27.1165 233.403 27.5951 233.162 28.0918C232.925 28.5885 232.485 28.9782 231.843 29.2607L234.351 33H232.136L229.812 29.5273H229.594V33H227.659V24.0244ZM229.607 25.624V27.9619H230.024C231.031 27.9619 231.535 27.5495 231.535 26.7246C231.535 26.3874 231.403 26.1208 231.138 25.9248C230.879 25.7243 230.516 25.624 230.052 25.624H229.607ZM236.203 24.0244H242.239V25.9316H240.181V33H238.247V25.9316H236.203V24.0244ZM244.651 24.0244H246.558V29.5137C246.558 30.0241 246.699 30.4342 246.982 30.7441C247.265 31.054 247.636 31.209 248.096 31.209C248.625 31.209 249.035 31.054 249.327 30.7441C249.618 30.4297 249.764 29.9876 249.764 29.418V24.0244H251.665V29.835C251.665 30.3454 251.532 30.8763 251.268 31.4277C251.004 31.9746 250.596 32.3939 250.044 32.6855C249.498 32.9772 248.885 33.123 248.206 33.123C246.975 33.123 246.075 32.7812 245.505 32.0977C244.936 31.4095 244.651 30.6872 244.651 29.9307V24.0244ZM257.481 24.0244H258.978L262.642 33H260.701L259.969 31.2363H256.531L255.827 33H253.892L257.481 24.0244ZM258.233 26.9639L257.187 29.6094H259.313L258.233 26.9639ZM265.17 24.0244H267.091V31.0654H269.737V33H265.17V24.0244Z" fill="white"/>
                                                <defs>
                                                <linearGradient id="paint0_linear_11968_83487" x1="277.036" y1="15.6657" x2="7.7086e-07" y2="176.446" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#2647BD"/>
                                                <stop offset="1" stop-color="#1B2AB1"/>
                                                </linearGradient>
                                                <linearGradient id="paint1_linear_11968_83487" x1="278.685" y1="15.6657" x2="1.64844" y2="176.446" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#161616"/>
                                                <stop offset="1" stop-color="#242424"/>
                                                </linearGradient>
                                                <linearGradient id="paint2_linear_11968_83487" x1="223.464" y1="84.9545" x2="4.12242" y2="169.85" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#D5D5D5"/>
                                                <stop offset="0.788762" stop-color="#818181" stop-opacity="0"/>
                                                </linearGradient>
                                                <clipPath id="clip0_11968_83487">
                                                <rect width="44" height="32" fill="white" transform="translate(235 134)"/>
                                                </clipPath>
                                                </defs>
                                            </svg>
                                            {% endif %}
                                        `;
                                        const subcon_card{{forloop.counter}} = document.getElementById('subcon_card{{forloop.counter}}');
                                        subcon_card{{forloop.counter}}.style.backgroundImage= `url('data:image/svg+xml,${encodeURIComponent(svgSubconCardContent{{ forloop.counter }})}')`;
                                        
                                    </script>
                                    <div class="subcon_bottom">
                                        <a class="fund_card" href="#fund" style="text-decoration: none;">
                                            <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M10.5 7V14M14 10.5H7" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M19.25 10.5C19.25 5.66751 15.3324 1.75 10.5 1.75C5.66751 1.75 1.75 5.66751 1.75 10.5C1.75 15.3324 5.66751 19.25 10.5 19.25C15.3324 19.25 19.25 15.3324 19.25 10.5Z" stroke="#5F6164" stroke-width="1.5"/>
                                            </svg>
                                            <span class="fund_card_text">Fund</span>
                                        </a>
                                        {% comment %}<a class="withdraw" href="#withdraw" style="text-decoration: none;" >
                                            <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M10.5 17.5V3.5" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M14.875 13.125C14.875 13.125 11.6529 17.5 10.5 17.5C9.3471 17.5 6.125 13.125 6.125 13.125" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>                                        
                                            <span class="withdraw_text">Withdraw</span>
                                        </a>{% endcomment %}
                                        <div class="freeze" style="cursor: pointer;">
                                            <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg" class="freeze_image{{forloop.counter}}">
                                                <path d="M18.375 12.4688L17.6478 11.8921C16.8201 11.2359 16.4062 10.9077 16.4062 10.5C16.4062 10.0923 16.8201 9.76413 17.6478 9.10788L18.375 8.53125M2.625 8.53125L3.35226 9.10788C4.17992 9.76413 4.59375 10.0923 4.59375 10.5C4.59375 10.9077 4.17992 11.2359 3.35226 11.8921L2.625 12.4688" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M12.7503 18.375L12.8872 17.4486C13.0429 16.3942 13.1207 15.867 13.4767 15.6613C13.8326 15.4556 14.3276 15.6517 15.3176 16.0438L16.1875 16.3884M8.24967 2.625L8.11284 3.55145C7.95711 4.60582 7.87925 5.133 7.52332 5.33872C7.16739 5.54444 6.67238 5.34835 5.68239 4.95617L4.8125 4.61158" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M4.375 16.3902L5.31153 16.0453C6.37735 15.6528 6.91029 15.4564 7.29331 15.662C7.67633 15.8675 7.75989 16.3946 7.92698 17.4487L8.07382 18.375M16.625 4.60972L15.6885 4.95468C14.6227 5.34726 14.0897 5.54354 13.7067 5.33802C13.3237 5.1325 13.2402 4.60541 13.073 3.55127L12.9262 2.625" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M16.625 10.5003H4.375M13.5625 15.7498L7.4375 5.25M13.5625 5.25022L7.4375 15.75" stroke="#5F6164" stroke-width="1.5" stroke-linejoin="round"/>
                                            </svg>                                        
                                            <span class="freeze_text{{forloop.counter}}">{% if card.state == "Active" %}Freeze{% else %}Unfreeze{% endif %}</span>
                                        </div>
                                        {% comment %}
                                        <div class="subcon_delete">
                                            <div class="subcon_subdeletes">
                                                <button class="subcon_subdelete" style="background-color: transparent; border: none; outline: none; padding: 0; margin: 0; font: inherit; color: inherit; {% if card.state == "Active" %}cursor: pointer;{% else %}cursor: not-allowed;{% endif %}" id="del{{forloop.counter}}" {% if card.state != "Active" %}disabled{% endif %}>
                                                    <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M17.0625 4.8125L16.5203 13.5845C16.3817 15.8256 16.3124 16.9462 15.7507 17.7519C15.4729 18.1502 15.1154 18.4864 14.7006 18.739C13.8618 19.25 12.7391 19.25 10.4936 19.25C8.24523 19.25 7.12101 19.25 6.28167 18.738C5.8667 18.485 5.509 18.1482 5.23135 17.7492C4.66977 16.9423 4.60202 15.8201 4.46653 13.5758L3.9375 4.8125" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round"/>
                                                        <path d="M2.625 4.8125H18.375M14.0487 4.8125L13.4515 3.58026C13.0547 2.76173 12.8562 2.35246 12.514 2.09721C12.4381 2.04059 12.3577 1.99022 12.2736 1.94661C11.8947 1.75 11.4398 1.75 10.5302 1.75C9.5977 1.75 9.1315 1.75 8.74622 1.95485C8.66084 2.00026 8.57936 2.05266 8.50263 2.11152C8.15643 2.37711 7.96305 2.80136 7.57628 3.64985L7.04631 4.8125" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round"/>
                                                        <path d="M8.3125 14.4375V9.1875" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round"/>
                                                        <path d="M12.6875 14.4375V9.1875" stroke="#5F6164" stroke-width="1.5" stroke-linecap="round"/>
                                                    </svg>
                                                    <span class="trash">
                                                        Delete
                                                    </span> 
                                                </button>
                                            </div>      
                                        </div>
                                        {% endcomment %}
                                    </div>
                                    
                                </div>
                            </div>
                            <br>
                            <style>
                                .address_text {
                                    font-family: Albert Sans;
                                    font-size: 16px;
                                    font-weight: 400;
                                    line-height: 19px;
                                    letter-spacing: 0.30000001192092896px;
                                    text-align: left;
                                    color: #a6a6a6;
                                }
                                .card_address_subcontent1 {
                                    display: flex;
                                    flex-direction: column;
                                    gap: 20px;
                                    font-family: Albert Sans;
                                    font-size: 16px;
                                    font-weight: 400;
                                    line-height: 19px;
                                    letter-spacing: 0.30000001192092896px;
                                    text-align: left;
                                    color: #a6a6a6;
                                }
                            </style>
                            <div style="display:flex; flex-direction: row; margin-bottom: 25px;">
                                <div class="card_submodal_subcontents1" id="fund">
                                    <form onsubmit="showPreloader(event)" action="{% url 'fund_card' card.card_id %}" method="POST" id="cardFundingForm" class="card_funding">
                                        {% csrf_token %}
                                        <div class="card_funding_head">
                                            Card Funding
                                        </div>
                                        <div class="card_funding_body">
                                            <span class="card_text">Enter Amount</span>
                                            <div class="card_funding_input">
                                                <input class="money_input" name="amount" type="text" placeholder="$ 0.00" id="money_input{{forloop.counter}}"/>
                                                <button type="submit" class="fund_button" id="fund_button{{forloop.counter}}">
                                                    Fund
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                    {% comment %}<form onsubmit="showPreloader(event)" action="{% url 'withdraw_from_card' card.card_id %}" method="POST" class="liquidate_card" id="withdraw">
                                        {% csrf_token %}
                                        <div class="liquidate_card_head">
                                            Card Withdrawal
                                        </div>
                                        <div class="liquidate_card_body">
                                            <span class="liquidate_card_text">Enter Amount</span>
                                            <div class="liquidate_card_input">
                                                <input class="liquidate_card_money_input" name="amount" type="text" placeholder="$ 0.00" id="liqui{{forloop.counter}}"/>
                                                <button type="submit" class="liquidate_card_fund_button" id="liqui_button{{forloop.counter}}">
                                                    Withdraw
                                                </button>
                                            </div>
                                        </div>
                                    </form>{% endcomment %}
                                </div>
                                <div style="width: 50%;display: flex;align-items: center;justify-content: center;flex-direction: column;">
                                    <div class="card_address_subcontent1">
                                        <span class="address_text">
                                            Billing Address: {{card.billing_address_line_1}}, {{card.billing_address_line_2}}
                                            <i class="fas fa-copy" onclick="copyToClipboard('{{card.id}}-address')"></i>
                                            <span id="{{card.id}}-address" style="display: none;">
                                                {{card.billing_address_line_1}}, {{card.billing_address_line_2}}
                                            </span>
                                        </span>
                                        <span class="address_text">
                                            City / State: {{card.billing_address_city}} / {{card.billing_address_state}}
                                            <i class="fas fa-copy" onclick="copyToClipboard('{{card.id}}-city-state')"></i>
                                            <span id="{{card.id}}-city-state" style="display: none;">
                                                {{card.billing_address_city}} / {{card.billing_address_state}}
                                            </span>
                                        </span>
                                        <span class="address_text">
                                            Country: {{card.billing_address_country}}
                                            <i class="fas fa-copy" onclick="copyToClipboard('{{card.id}}-country')"></i>
                                            <span id="{{card.id}}-country" style="display: none;">
                                                {{card.billing_address_country}}
                                            </span>
                                        </span>
                                        <span class="address_text">
                                            Zip Code: {{card.billing_address_zip_code}}
                                            <i class="fas fa-copy" onclick="copyToClipboard('{{card.id}}-zip')"></i>
                                            <span id="{{card.id}}-zip" style="display: none;">
                                                {{card.billing_address_zip_code}}
                                            </span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="get_statement">
                                <div class="get_statement_head">
                                    <h3 class="span_statement_text">
                                        Choose a timeframe for your statement.
                                    </h3>
                                </div>
                                <form action="{% url 'card_statement' card.card_id %}" method="GET" onsubmit="return validateDates(event)">
                                    <div class="get_statement_body">
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">Start Date</span>
                                            <input type="date" max="{{ today|date:"Y-m-d" }}" name="start_date" id="start_date{{forloop.counter}}" class="get_statement_start_input" required>
                                        </div>
                                        <div class="get_statement_end">
                                            <span class="get_statement_end_text">End Date</span>
                                            <input type="date" max="{{ today|date:"Y-m-d" }}" name="end_date" id="end_date{{forloop.counter}}" class="get_statement_end_input" required>
                                        </div>
                                        <div class="get_statement_choose">
                                            <svg width="22" height="23" viewBox="0 0 22 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M21.876 4.28319C21.8745 4.26116 21.8703 4.23987 21.863 4.21883C21.8603 4.21099 21.8581 4.20341 21.8547 4.19607C21.8424 4.16988 21.8273 4.14492 21.8057 4.12387L18.0381 0.429364C18.0173 0.408808 17.9928 0.394125 17.9671 0.382623C17.9593 0.378952 17.9512 0.376995 17.9431 0.374303C17.9233 0.367695 17.9035 0.36378 17.8829 0.362556C17.8773 0.362067 17.8721 0.359375 17.8668 0.359375H8.47618C7.56069 0.359375 6.81577 1.10405 6.81577 2.01979V2.58582H2.53932C1.62383 2.58582 0.878906 3.3305 0.878906 4.24623V20.7238C0.878906 21.6393 1.62383 22.384 2.53932 22.384H14.2816C15.1971 22.384 15.942 21.6393 15.942 20.7238V20.1578H20.2187C21.1342 20.1578 21.8789 19.4131 21.8789 18.4976V4.2986C21.8789 4.29322 21.8762 4.28857 21.876 4.28319ZM21.0351 4.05389H18.8995C18.4648 4.05389 18.1112 3.70051 18.1112 3.26589V1.18677L21.0351 4.05389ZM15.4526 20.7238C15.4526 21.3694 14.9274 21.8946 14.2816 21.8946H2.53932C1.89375 21.8946 1.36834 21.3694 1.36834 20.7238V4.24599C1.36834 3.60042 1.89351 3.07501 2.53932 3.07501H7.06073H11.6852V5.53516C11.6852 6.21597 12.239 6.76952 12.9195 6.76952H15.4529V19.9128L15.4526 20.7238ZM15.0983 6.28033H12.9195C12.5086 6.28033 12.1746 5.94605 12.1746 5.53541V3.41346L15.0983 6.28033ZM20.2187 19.6681H15.942V15.5439H18.7957C18.931 15.5439 19.0404 15.4345 19.0404 15.2992C19.0404 15.1638 18.931 15.0545 18.7957 15.0545H15.942V12.0941H18.7957C18.931 12.0941 19.0404 11.9847 19.0404 11.8494C19.0404 11.7141 18.931 11.6047 18.7957 11.6047H15.942V8.64455H18.7957C18.931 8.64455 19.0404 8.53492 19.0404 8.39983C19.0404 8.26475 18.931 8.15512 18.7957 8.15512H15.942V6.5248C15.942 6.51942 15.9394 6.51477 15.9389 6.50939C15.9374 6.48736 15.9332 6.46607 15.9259 6.44527C15.923 6.4372 15.9208 6.42912 15.9173 6.42153C15.9066 6.39853 15.8924 6.37699 15.8745 6.35791C15.8725 6.35595 15.8716 6.35326 15.8694 6.3513C15.8691 6.35105 15.8689 6.35057 15.8686 6.35032L12.1032 2.65752L12.1029 2.65728L12.1012 2.65581C12.0809 2.63599 12.0571 2.6213 12.0322 2.6098C12.029 2.60834 12.0266 2.60589 12.0234 2.60466C12.0177 2.60222 12.0116 2.60271 12.0058 2.60075C11.9862 2.59439 11.9664 2.59023 11.9458 2.589C11.9402 2.58851 11.9353 2.58582 11.9296 2.58582H7.30545V2.01979C7.30545 1.37398 7.83062 0.848811 8.47618 0.848811H17.622V3.26589C17.622 3.97019 18.1952 4.54332 18.8997 4.54332H21.3897V18.4974C21.3895 19.143 20.8643 19.6681 20.2187 19.6681Z" fill="#001F8B"/>
                                            </svg>
                                            <button class="get_statement_choose_text" id="disable_link{{forloop.counter}}" type="submit" style="cursor: pointer;">
                                                Get Statement
                                            </button>  
                                        </div>
                                    </div>
                                    <br>
                                    <div class="get_statement_body">
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">Email</span>
                                            <input type="text" style="text-transform: none;" name="email" value="{{card.user.email}}" class="get_statement_start_input" required>
                                        </div>
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">First name</span>
                                            <input type="text" style="text-transform: none;" name="first_name" value="{{card.user.first_name}}" class="get_statement_start_input" required>
                                        </div>
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">Last name</span>
                                            <input type="text" style="text-transform: none;" name="last_name" value="{{card.user.last_name}}" class="get_statement_start_input" required>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="get_statement_body">
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">Billing Address (Line 1)</span>
                                            <input type="text" style="text-transform: none;" name="billing_address_line_1" value="{{card.billing_address_line_1}}" class="get_statement_start_input" required>
                                        </div>
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">Billing Address (Line 2)</span>
                                            <input type="text" style="text-transform: none;" name="billing_address_line_2" value="{{card.billing_address_line_2}}" class="get_statement_start_input" required>
                                        </div>
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">City</span>
                                            <input type="text" style="text-transform: none;" name="billing_address_city" value="{{card.billing_address_city}}" class="get_statement_start_input" required>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="get_statement_body">
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">State</span>
                                            <input type="text" style="text-transform: none;" name="billing_address_state" value="{{card.billing_address_state}}" class="get_statement_start_input" required>
                                        </div>
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">Country</span>
                                            <input type="text" style="text-transform: none;" name="billing_address_country" value="{{card.billing_address_country}}" class="get_statement_start_input" required>
                                        </div>
                                        <div class="get_statement_start">
                                            <span class="get_statement_start_text">Zip Code</span>
                                            <input type="number" style="text-transform: none;" name="billing_address_zip_code" value="{{card.billing_address_zip_code}}" class="get_statement_start_input" required>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <script>
                                function validateDates(event) {
                                    var startDateInput = document.getElementById("start_date{{forloop.counter}}");
                                    var endDateInput = document.getElementById("end_date{{forloop.counter}}");
                                
                                    var startDate = startDateInput.value;
                                    var endDate = endDateInput.value;
                                
                                    // Convert date strings to Date objects for comparison
                                    var start = new Date(startDate);
                                    var end = new Date(endDate);
                                
                                    // Check if end date is earlier than start date
                                    if (end <= start) {
                                        alert("End date must be later than the start date.");
                                        endDateInput.value = ""; // Clear the end date input
                                        return false; // Prevents form submission
                                    }
                                
                                    // If validation passes, allow form submission
                                    return true;
                                }
                            </script>
                            <div class="card_submodal_tables">
                                <div class="card_submodal_tables_head">
                                    <span class="table_head">
                                        Transactions
                                    </span>
                                </div>
                                <table class="card_submmodal_table">
                                    <thead class="card_submmodal_thead">
                                        <tr class="card_submmodal_thead_tr">
                                          <th>Currency</th>
                                          <th>Merchant</th>
                                          <th>Description</th>
                                          <th>Amount</th>
                                          <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody class="card_submmodal_body">
                                    </tbody>
                                </table>
                                <div id="card-transactions-loader{{forloop.counter}}" style="padding: 20px; color: #001F8B; font-size: 25px;display: block; text-align: center;">
                                    <i class="fas fa-spinner fa-spin" style="font-size: 45px;"></i>&nbsp;<span style="font-weight: 600; font-size: 15px;">Fetching Card Transactions</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            {% comment %}
            <div class="delete_cards" id="delete{{forloop.counter}}" style="display: none;">
                <div class="delete_card">
                    <div class="delete_subcard">
                        <!-- <div class="delete_main_card"> -->
                            <div class="delete_main_card_head">
                                Delete Card
                            </div>
                            <div class="delete_main_card_body">
                                <div class="delete_main_card_body_text">
                                    Are you sure you
                                    want to delete this card?
                                </div>
                                <form onsubmit="showPreloader(event)" action="{% url 'cancel_card' card.card_id %}" method="POST" class="delete_main_card_body_buttons">
                                    {% csrf_token %}
                                    <div class="delete_main_no" id="delete_main_no{{forloop.counter}}">
                                        No
                                    </div>
                                    <button type="submit" class="delete_main_yes">
                                        Yes
                                    </button>
                                </form>
                            </div>
                        <!-- </div> -->
                    </div>
                </div>
            </div>
            {% endcomment %}
        </div>
        {% endfor %}

        <div class="card_modals2" id="create_card" style="display: none;">
            <div class="card_modal">
                <div class="card_submmodal">
                    <div class="card_submodal_header">
                        <span class="card_submodal_header_text">
                            Create New Card
                        </span>
                        <svg class="proproom-content-head2"id="proproom-content-head2" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none" style="cursor: pointer;" onclick="closeCreate()">
                            <path d="M8.59375 7.49994L14.7734 1.32021C15.0755 1.0182 15.0755 0.528522 14.7735 0.226509C14.4713 -0.0755032 13.9817 -0.0755032 13.6797 0.226509L7.50006 6.40623L1.32041 0.226509C1.0184 -0.0755032 0.528669 -0.0755032 0.226548 0.226509C-0.0755717 0.528522 -0.0754606 1.01826 0.226548 1.32033L6.4062 7.50005L0.226548 13.6797C-0.0754606 13.9817 -0.0754606 14.4714 0.226548 14.7735C0.377581 14.9245 0.57553 15 0.773423 15C0.971371 15 1.16932 14.9245 1.3203 14.7735L7.49995 8.59375L13.6796 14.7735C13.8306 14.9245 14.0286 15 14.2265 15C14.4244 15 14.6224 14.9245 14.7733 14.7735C15.0754 14.4715 15.0754 13.9817 14.7733 13.6797L8.59375 7.49994Z" fill="black"/>
                        </svg>
                    </div>
                    <div class="card_submmodal_content">
                        <div class="card_submmodal_subcontent">
                            <div class="card_submodal_subcontents">
                                <div class="card_submmodal_subcontent1">
                                    <span class="subcontent1_text">
                                        1. You will be charged $10 for card creation.
                                    </span>
                                    <span class="subcontent1_text">
                                        2. The minimum to create and fund a card is $15.
                                    </span>
                                    <span class="subcontent1_text">
                                        3. A ${{maintenance_fee}} monthly maintenance fee will be deducted from your card.
                                    </span>
                                    <span class="subcontent1_text">
                                        4. If the full maintenance fee cannot be deducted from your card, the remaining balance will be deducted from your wallet.
                                    </span>
                                    <span class="subcontent1_text">
                                        5. If the maintenance fee cannot be deducted, your card will be deleted.
                                    </span>
                                </div>
                                <div class="card_submmodal_subcontent2">
                                    <div class="subcon2_image1" id="subcon2_image1">
                                        <div class="bfree_mon_card1">
                                            <div class="bfree_mon_card1_con">
                                                <div class="bfree_mon_first">
                                                    <div class="bfree_mon_first_input" id="amtDis">$ 00.00</div>
                                                </div>
                                                <div class="bfree_mon_second">
                                                    <div class="bfree_mon_second_input">0000</div>
                                                    <div class="bfree_mon_second_input" id="visible">0000</div>
                                                    <div class="bfree_mon_second_input" id="visible">0000</div>
                                                    <div class="bfree_mon_second_input">0000</div>
                                                </div>
                                                <div class="bfree_mon_third">
                                                    <div class="bfree_mon_subthird1">
                                                        <span class="valid_thru">Valid thru</span>
                                                        <div class="valid_thru_input">02/27</div>
                                                    </div>
                                                    <div class="bfree_mon_subthird1">
                                                        <span class="cvv">CVV</span>
                                                        <div class="cvv_input" id="visible">000</div>
                                                    </div>
                                                </div>
                                                <div class="bfree_mon_fourth">
                                                    <div id="amtName" class="name_input" style="text-transform: uppercase">CARD HOLDER</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card_submodal_tables">
                                <div class="card_submodal_tables_head">
                                    <span class="table_head">
                                        Create Card
                                    </span>
                                </div>
                                <form id="create_card_form" action="{% url "create_card" %}" method="post">
                                    {% csrf_token %}
                                    <div class="create_card_details">
                                        <div class="create_card_amount">
                                            <span class="create_card_amText">Enter Amount</span>
                                            <input type="text" name="amount" class="create_card_amInput" placeholder="$0.00" required>
                                        </div>
                                        <div class="create_card_amount">
                                            <span class="create_card_amText">Brand</span>
                                            <select class="create_card_amInput" name="brand">
                                                <option value="MasterCard">MasterCard</option>
                                                <option value="Visa">Visa</option>
                                            </select>
                                        </div>
                                        <div class="create_card_design">
                                            <span class="create_card_designText">Pick Color</span>
                                            <input type="color" name="card_color" class="create_card_designInput" id="color-picker">
                                        </div>
                                    </div>
                                    <div id="errorMessage" style="color: red; display: flex; justify-content: center; padding-bottom: 10px;"></div>
                                    <div class="create_card_bottom">
                                        <button class="create_fundCard" type="submit">
                                            Create and Fund
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div> 
        </div>
    </div>

    <script>
        // Transaction Date Elements
        var transactionDateElements = document.querySelectorAll('.creation-date');
        
        // Formatting and displaying the date
        transactionDateElements.forEach(function (element) {
          var timestamp = new Date(element.dataset.timestamp);
          var userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
          var dateOptions = { timeZone: userTimeZone, year: 'numeric', month: 'short', day: 'numeric', hour12: true, hour: '2-digit', minute: '2-digit', second: '2-digit' };
          var localDate = new Intl.DateTimeFormat('default', dateOptions).format(timestamp);
          element.textContent = localDate;
        });
        // for Details
        {% for card in cards reversed %}
        document.addEventListener('DOMContentLoaded', function() {
            var fetched{{ forloop.counter }} = false;
            
            const cardDetails{{ forloop.counter }} = document.getElementById('card_details{{forloop.counter}}');

            cardDetails{{ forloop.counter }}.addEventListener('click', () => {
                document.getElementById('cards{{forloop.counter}}').style.display = 'block';
                document.getElementById('overlay').style.display = 'block';
                document.body.classList.add('estimating'); 
            
                function fetchCardTransactions() {
                    document.getElementById('card-transactions-loader{{forloop.counter}}').style.display = 'block';
                    const tbody = $('.card_submmodal_body');
                    tbody.empty();
                    $.ajax({
                        type: "GET",
                        url: "{% url 'card_transactions' card.card_id %}",
                        success: function(response) {
                            document.getElementById('card-transactions-loader{{forloop.counter}}').style.display = 'none';
                            const transactions = response.transactions;
                            if (transactions.length === 0) {
                                tbody.append('<tr><td colspan="5">No Card Transactions yet</td></tr>');
                            } else {
                                transactions.forEach(transaction => {
                                    const row = `<tr class="card_submmodal_body_tr">
                                                    <td>${transaction.currency}</td>
                                                    <td>${transaction.merchant}</td>
                                                    <td>${transaction.description}</td>
                                                    <td>${transaction.amount}</td>
                                                    <td>${new Date(transaction.date_created).toLocaleString()}</td>
                                                </tr>`;
                                    tbody.append(row);
                                });
                            };
                        },
                        error: function(response) {
                            document.getElementById('card-transactions-loader{{forloop.counter}}').style.display = 'none';
                        }
                    });
                };
                if (!fetched{{ forloop.counter }}){
                    fetchCardTransactions();
                }
            });
            
            const del{{ forloop.counter }} = document.getElementById('del{{ forloop.counter }}');

            del{{ forloop.counter }}.addEventListener('click', () => {
                $("#delete{{forloop.counter}}").show();
                document.body.classList.add('estimating');
            });
            
            const delete_main_no{{forloop.counter}} = document.getElementById('delete_main_no{{forloop.counter}}');

            delete_main_no{{forloop.counter}}.addEventListener('click', () => {
                $("#delete{{forloop.counter}}").hide();
                document.body.classList.remove('estimating');
            });
        });
        {% endfor %}
        // Function to close the details modal
        function closeDetails() {
            $(".card_modals").hide();
            $("#overlay").hide();
            document.body.classList.remove('estimating');
            document.getElementById('create_card').style.display = 'none';
        }
        // for Delete
        function openCreate() {
            document.getElementById('create_card').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
            document.body.classList.add('estimating'); 
        }
        // Function to close the deatials modal
        function closeCreate() {
            document.getElementById('create_card').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            document.body.classList.remove('estimating');
        }
        function toCreateCards() {
            openCreate()
        }
    </script>
    <script>
        const svgContent = `
            <svg width="298" height="181" viewBox="0 0 298 181" fill="" xmlns="http://www.w3.org/2000/svg" id="svg-background">
                <rect width="296" height="180.568" rx="17.3148" fill="url(#paint0_linear_5061_13247)"/>
                <mask id="mask0_5061_13247" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="1" y="0" width="297" height="181">
                <rect x="1.64844" width="296" height="180.568" rx="17.3148" fill="url(#paint1_linear_5061_13247)"/>
                </mask>
                <g mask="url(#mask0_5061_13247)">
                <path d="M262.215 191.316C253.971 21.4668 -143.447 -72.527 -112.939 96.4987L-12.3485 181.422C32.1751 212.479 268.947 330.03 262.215 191.316Z" fill="url(#paint2_linear_5061_13247)" fill-opacity="0.34"/>
                <path d="M277.331 86H236.634C235.746 86 235 86.7102 235 87.6336V117.322C235 118.21 235.71 118.956 236.634 118.956H277.366C278.254 118.956 279 118.245 279 117.322V87.6336C278.964 86.7458 278.254 86 277.331 86Z" fill="#FFD05B"/>
                <path d="M267.139 95.5529V86H264.831V95.5529H249.134V86H246.826V95.5529H235V97.8967H278.964V95.5529H267.139Z" fill="#F9B54C"/>
                <path d="M235 109.359H246.826V118.912H249.134V109.359H264.831V118.912H267.139V109.359H278.964V107.016H235V109.359Z" fill="#F9B54C"/>
                </g>
                <path d="M245.348 149.308L238.331 166.053H233.754L230.301 152.688C230.091 151.866 229.91 151.564 229.272 151.218C228.231 150.653 226.512 150.124 225 149.793L225.103 149.308H232.472C232.953 149.308 233.419 149.48 233.785 149.793C234.151 150.105 234.394 150.539 234.468 151.015L236.293 160.706L240.799 149.308H245.348ZM263.286 160.587C263.304 156.166 257.176 155.923 257.219 153.948C257.232 153.347 257.804 152.708 259.054 152.545C260.52 152.406 261.996 152.665 263.326 153.296L264.085 149.744C262.79 149.257 261.418 149.005 260.034 149C255.754 149 252.741 151.279 252.714 154.538C252.688 156.948 254.865 158.291 256.506 159.095C258.194 159.915 258.762 160.442 258.753 161.175C258.741 162.3 257.408 162.794 256.162 162.814C253.985 162.848 252.723 162.227 251.714 161.758L250.93 165.426C251.942 165.89 253.809 166.297 255.745 166.315C260.293 166.315 263.27 164.067 263.286 160.587ZM274.587 166.053H278.593L275.099 149.308H271.401C271.006 149.305 270.618 149.42 270.29 149.639C269.961 149.858 269.705 150.171 269.556 150.537L263.06 166.053H267.607L268.511 163.551H274.067L274.587 166.053ZM269.757 160.12L272.035 153.832L273.348 160.12H269.757ZM251.535 149.308L247.956 166.053H243.624L247.208 149.308H251.535Z" fill="white"/>
                <path d="M219.812 24.2H221.842L218.244 34H215.934L212.336 24.2H214.394L217.096 32.054L219.812 24.2ZM224.314 24.2H226.246V34H224.314V24.2ZM233.472 24.2C235.824 24.2 236.972 25.558 236.972 27.196C236.972 28.372 236.328 29.59 234.76 30.01L237.112 34H234.872L232.716 30.164H231.344V34H229.412V24.2H233.472ZM235.012 27.238C235.012 26.356 234.508 25.782 233.402 25.782H231.344V28.722H233.402C234.508 28.722 235.012 28.134 235.012 27.238ZM239.23 24.2H247.196V25.754H244.172V34H242.254V25.754H239.23V24.2ZM249.78 24.2H251.698V30.29C251.698 31.676 252.58 32.362 253.84 32.362C255.114 32.362 255.996 31.676 255.996 30.29V24.2H257.914V30.276C257.914 32.852 255.94 34.098 253.812 34.098C251.67 34.098 249.78 32.852 249.78 30.276V24.2ZM259.753 34L263.267 24.2H266.515L270.029 34H267.999L267.215 31.704H262.553L261.755 34H259.753ZM265.171 25.754H264.597L263.071 30.192H266.697L265.171 25.754ZM274.201 24.2V32.474L278.541 32.488V34H272.269V24.2H274.201Z" fill="white"/>
                <defs>
                <linearGradient id="paint0_linear_5061_13247" x1="277.036" y1="15.6657" x2="7.7086e-07" y2="176.446" gradientUnits="userSpaceOnUse">
                <stop stop-color="#2647BD"/>
                <stop offset="1" stop-color="#1B2AB1"/>
                </linearGradient>
                <linearGradient id="paint1_linear_5061_13247" x1="278.685" y1="15.6657" x2="1.64844" y2="176.446" gradientUnits="userSpaceOnUse">
                <stop stop-color="#161616"/>
                <stop offset="1" stop-color="#242424"/>
                </linearGradient>
                <linearGradient id="paint2_linear_5061_13247" x1="223.462" y1="84.9555" x2="4.12047" y2="169.851" gradientUnits="userSpaceOnUse">
                <stop stop-color="#D5D5D5"/>
                <stop offset="0.788762" stop-color="#818181" stop-opacity="0"/>
                </linearGradient>
                </defs>
            </svg>
        `;
        const bgImage = document.getElementById('subcon2_image1')
        const svgBackground = document.getElementById('svg-background');
        const colorPicker = document.getElementById('color-picker');

        // Set the SVG as the background image
        bgImage.style.backgroundImage = `url('data:image/svg+xml,${encodeURIComponent(svgContent)}')`;
        bgImage.style.backgroundSize = 'cover';

        colorPicker.addEventListener('input', function() {
            const color = colorPicker.value;
            bgImage.style.backgroundImage = `url('data:image/svg+xml,${encodeURIComponent(`
            <svg width="298" height="181" viewBox="0 0 298 181" fill="" xmlns="http://www.w3.org/2000/svg" id="svg-background">
                <rect width="296" height="180.568" rx="17.3148" fill="${color}"/>
                <mask id="mask0_5061_13247" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="1" y="0" width="297" height="181">
                <rect x="1.64844" width="296" height="180.568" rx="17.3148" fill="${color}"/>
                </mask>
                <g mask="url(#mask0_5061_13247)">
                <path d="M262.215 191.316C253.971 21.4668 -143.447 -72.527 -112.939 96.4987L-12.3485 181.422C32.1751 212.479 268.947 330.03 262.215 191.316Z" fill="url(#paint2_linear_5061_13247)" fill-opacity="0.34"/>
                <path d="M277.331 86H236.634C235.746 86 235 86.7102 235 87.6336V117.322C235 118.21 235.71 118.956 236.634 118.956H277.366C278.254 118.956 279 118.245 279 117.322V87.6336C278.964 86.7458 278.254 86 277.331 86Z" fill="#FFD05B"/>
                <path d="M267.139 95.5529V86H264.831V95.5529H249.134V86H246.826V95.5529H235V97.8967H278.964V95.5529H267.139Z" fill="#F9B54C"/>
                <path d="M235 109.359H246.826V118.912H249.134V109.359H264.831V118.912H267.139V109.359H278.964V107.016H235V109.359Z" fill="#F9B54C"/>
                </g>
                <path d="M245.348 149.308L238.331 166.053H233.754L230.301 152.688C230.091 151.866 229.91 151.564 229.272 151.218C228.231 150.653 226.512 150.124 225 149.793L225.103 149.308H232.472C232.953 149.308 233.419 149.48 233.785 149.793C234.151 150.105 234.394 150.539 234.468 151.015L236.293 160.706L240.799 149.308H245.348ZM263.286 160.587C263.304 156.166 257.176 155.923 257.219 153.948C257.232 153.347 257.804 152.708 259.054 152.545C260.52 152.406 261.996 152.665 263.326 153.296L264.085 149.744C262.79 149.257 261.418 149.005 260.034 149C255.754 149 252.741 151.279 252.714 154.538C252.688 156.948 254.865 158.291 256.506 159.095C258.194 159.915 258.762 160.442 258.753 161.175C258.741 162.3 257.408 162.794 256.162 162.814C253.985 162.848 252.723 162.227 251.714 161.758L250.93 165.426C251.942 165.89 253.809 166.297 255.745 166.315C260.293 166.315 263.27 164.067 263.286 160.587ZM274.587 166.053H278.593L275.099 149.308H271.401C271.006 149.305 270.618 149.42 270.29 149.639C269.961 149.858 269.705 150.171 269.556 150.537L263.06 166.053H267.607L268.511 163.551H274.067L274.587 166.053ZM269.757 160.12L272.035 153.832L273.348 160.12H269.757ZM251.535 149.308L247.956 166.053H243.624L247.208 149.308H251.535Z" fill="white"/>
                <path d="M219.812 24.2H221.842L218.244 34H215.934L212.336 24.2H214.394L217.096 32.054L219.812 24.2ZM224.314 24.2H226.246V34H224.314V24.2ZM233.472 24.2C235.824 24.2 236.972 25.558 236.972 27.196C236.972 28.372 236.328 29.59 234.76 30.01L237.112 34H234.872L232.716 30.164H231.344V34H229.412V24.2H233.472ZM235.012 27.238C235.012 26.356 234.508 25.782 233.402 25.782H231.344V28.722H233.402C234.508 28.722 235.012 28.134 235.012 27.238ZM239.23 24.2H247.196V25.754H244.172V34H242.254V25.754H239.23V24.2ZM249.78 24.2H251.698V30.29C251.698 31.676 252.58 32.362 253.84 32.362C255.114 32.362 255.996 31.676 255.996 30.29V24.2H257.914V30.276C257.914 32.852 255.94 34.098 253.812 34.098C251.67 34.098 249.78 32.852 249.78 30.276V24.2ZM259.753 34L263.267 24.2H266.515L270.029 34H267.999L267.215 31.704H262.553L261.755 34H259.753ZM265.171 25.754H264.597L263.071 30.192H266.697L265.171 25.754ZM274.201 24.2V32.474L278.541 32.488V34H272.269V24.2H274.201Z" fill="white"/>
                <defs>
                <linearGradient id="paint0_linear_5061_13247" x1="277.036" y1="15.6657" x2="7.7086e-07" y2="176.446" gradientUnits="userSpaceOnUse">
                <stop stop-color="#2647BD"/>
                <stop offset="1" stop-color="#1B2AB1"/>
                </linearGradient>
                <linearGradient id="paint1_linear_5061_13247" x1="278.685" y1="15.6657" x2="1.64844" y2="176.446" gradientUnits="userSpaceOnUse">
                <stop stop-color="#161616"/>
                <stop offset="1" stop-color="#242424"/>
                </linearGradient>
                <linearGradient id="paint2_linear_5061_13247" x1="223.462" y1="84.9555" x2="4.12047" y2="169.851" gradientUnits="userSpaceOnUse">
                <stop stop-color="#D5D5D5"/>
                <stop offset="0.788762" stop-color="#818181" stop-opacity="0"/>
                </linearGradient>
                </defs>
            </svg>
        `)}')`;
        });

        const validThruInputs = document.querySelectorAll('.valid_thru_input');

        validThruInputs.forEach(input => {
            const originalText = input.textContent.trim();
            
            if (originalText.length === 4) {
                const month = originalText.slice(0, 2);
                const year = originalText.slice(2);
                input.textContent = `${month}/${year}`;
            }
        });

        const secondInputs = document.querySelectorAll('.bfree_mon_second_input');

        function formatSecondInputs(secondInputs) {
            secondInputs.forEach(input => {
                const originalText = input.textContent.trim();
        
                if (originalText.length === 16) {
                    const formattedText = originalText.match(/.{1,4}/g).join(' ');
        
                    input.textContent = formattedText;
                }
            });
        }
        formatSecondInputs(secondInputs);
    </script>
    
    <script>
        // FOR CAROUSEL
        document.addEventListener('DOMContentLoaded', function () {
            {% if messages %}
                {% for message in messages %}
                    var message_noti = '{{ message }}';
                    showNotification(message_noti);
                {% endfor %}
            {% endif %}
            // Initialize Splide carousel
            new Splide('#splide', {
                type: 'carousel', // Set type to 'carousel'
                perPage: 3, // Number of slides per page
                rewind: true, // Allow infinite loop
                // Add more options as needed
            }).mount();
        });
        $('.fund_card').click(function() {
            $('html, body').animate({scrollTop: $(document).height()}, 'slow');
        });
        $('.withdraw').click(function() {
            $('html, body').animate({scrollTop: $(document).height()}, 'slow');
        });
        $('.card_details').click(function() {
            $('html, body').animate({scrollTop: 0}, 'slow');
        });
        
        {% for card in cards reversed %}
            // for freeze
            var freezeText{{forloop.counter}} = document.querySelector('.freeze_text{{forloop.counter}}');
            var subcon2Image{{forloop.counter}} = document.querySelector('#subcon_card{{forloop.counter}}');
            var freezeImage{{forloop.counter}} = document.querySelector('.freeze_image{{forloop.counter}}')
            var liquid{{forloop.counter}} = document.getElementById('liqui{{forloop.counter}}')
            var liquidBut{{forloop.counter}} = document.getElementById('liqui_button{{forloop.counter}}')
            var fundBut{{forloop.counter}} = document.getElementById('fund_button{{forloop.counter}}')
            var fund{{forloop.counter}} = document.getElementById('money_input{{forloop.counter}}')
            var start_date{{forloop.counter}} = document.getElementById('start_date{{forloop.counter}}')
            var end_date{{forloop.counter}} = document.getElementById('end_date{{forloop.counter}}')
            var statement{{forloop.counter}} = document.getElementById('disable_link{{forloop.counter}}')
            var det{{forloop.counter}} = document.getElementById('del{{forloop.counter}}')
            var card_status{{forloop.counter}} = document.getElementById('card_status{{forloop.counter}}')
            var bfree_mon_card{{forloop.counter}} = document.getElementById('mon_card{{forloop.counter}}')

            document.addEventListener('DOMContentLoaded', function () {
                if (freezeText{{forloop.counter}}.textContent == 'Freeze') {
                    subcon2Image{{forloop.counter}}.classList.remove('blurred');
                    bfree_mon_card{{forloop.counter}}.classList.remove('blurred');
                    $("#del{{forloop.counter}}").prop("disabled", false);
                    freezeText{{forloop.counter}}.style.color = '#5F6164';
                    freezeImage{{forloop.counter}}.style.fill = '#5F6164';
                    liquid{{forloop.counter}}.removeAttribute('disabled');
                    liquidBut{{forloop.counter}}.removeAttribute('disabled');
                    fundBut{{forloop.counter}}.removeAttribute('disabled');
                    fund{{forloop.counter}}.removeAttribute('disabled');
                    start_date{{forloop.counter}}.removeAttribute('disabled');
                    end_date{{forloop.counter}}.removeAttribute('disabled');
                    statement{{forloop.counter}}.removeAttribute('disabled');
                    liquidBut{{forloop.counter}}.style.cursor = 'pointer'
                    fundBut{{forloop.counter}}.style.cursor = 'pointer'
                    start_date{{forloop.counter}}.style.cursor = 'pointer'
                    end_date{{forloop.counter}}.style.cursor = 'pointer'
                    statement{{forloop.counter}}.style.cursor = 'pointer'
                    det{{forloop.counter}}.style.cursor = 'pointer'
                } else if (freezeText{{forloop.counter}}.textContent == 'Unfreeze') {
                    $("#del{{forloop.counter}}").prop("disabled", true);
                    subcon2Image{{forloop.counter}}.classList.add('blurred');
                    bfree_mon_card{{forloop.counter}}.classList.add('blurred');
                    freezeText{{forloop.counter}}.style.color = '#001F8B';
                    freezeImage{{forloop.counter}}.style.fill = '#001F8B';
                    liquid{{forloop.counter}}.setAttribute('disabled', 'true');
                    liquidBut{{forloop.counter}}.setAttribute('disabled', 'true');
                    fundBut{{forloop.counter}}.setAttribute('disabled', 'true');
                    fund{{forloop.counter}}.setAttribute('disabled', 'true');
                    start_date{{forloop.counter}}.setAttribute('disabled', 'true');
                    end_date{{forloop.counter}}.setAttribute('disabled', 'true');
                    liquidBut{{forloop.counter}}.style.cursor = 'not-allowed'
                    fundBut{{forloop.counter}}.style.cursor = 'not-allowed'
                    start_date{{forloop.counter}}.style.cursor = 'not-allowed'
                    end_date{{forloop.counter}}.style.cursor = 'not-allowed'
                    statement{{forloop.counter}}.setAttribute('disabled', 'true');
                    statement{{forloop.counter}}.style.cursor = 'not-allowed'
                    det{{forloop.counter}}.style.cursor = 'not-allowed'
                    det{{forloop.counter}}.setAttribute('href', 'javascript:void(0)');
                } else {
                    $("#del{{forloop.counter}}").prop("disabled", true);
                    subcon2Image{{forloop.counter}}.classList.add('blurred');
                    bfree_mon_card{{forloop.counter}}.classList.add('blurred');
                    freezeText{{forloop.counter}}.style.color = '#001F8B';
                    freezeImage{{forloop.counter}}.style.fill = '#001F8B';
                    liquid{{forloop.counter}}.setAttribute('disabled', 'true');
                    liquidBut{{forloop.counter}}.setAttribute('disabled', 'true');
                    fundBut{{forloop.counter}}.setAttribute('disabled', 'true');
                    fund{{forloop.counter}}.setAttribute('disabled', 'true');
                    start_date{{forloop.counter}}.setAttribute('disabled', 'true');
                    end_date{{forloop.counter}}.setAttribute('disabled', 'true');
                    liquidBut{{forloop.counter}}.style.cursor = 'not-allowed'
                    fundBut{{forloop.counter}}.style.cursor = 'not-allowed'
                    start_date{{forloop.counter}}.style.cursor = 'not-allowed'
                    end_date{{forloop.counter}}.style.cursor = 'not-allowed'
                    statement{{forloop.counter}}.setAttribute('disabled', 'true');
                    statement{{forloop.counter}}.style.cursor = 'not-allowed'
                    det{{forloop.counter}}.style.cursor = 'not-allowed'
                    det{{forloop.counter}}.setAttribute('href', 'javascript:void(0)');
                }
            });
    
            freezeText{{forloop.counter}}.addEventListener('click', function() {
                $(".pre-loader").css("display", "flex");
                $(".pre-loader").show();
                const showHide{{ forloop.counter }} = document.querySelector('.show_and_hide{{ forloop.counter }}');
                
                $.ajax({
                    type: "POST",
                    url: "{% url 'freeze_and_unfreeze_card' card.card_id %}",
                    data: {
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function(response) {
                        showNotification(response.message);
                        $(".pre-loader").hide();
                        if (freezeText{{forloop.counter}}.textContent == 'Unfreeze') {
                            subcon2Image{{forloop.counter}}.classList.remove('blurred');
                            bfree_mon_card{{forloop.counter}}.classList.remove('blurred');
                            freezeText{{forloop.counter}}.textContent = 'Freeze';
                            card_status{{forloop.counter}}.textContent = 'Active';
                            $("#del{{forloop.counter}}").prop("disabled", false);
                            freezeText{{forloop.counter}}.style.color = '#5F6164';
                            freezeImage{{forloop.counter}}.style.fill = '#5F6164';
                            liquid{{forloop.counter}}.removeAttribute('disabled');
                            liquidBut{{forloop.counter}}.removeAttribute('disabled');
                            fundBut{{forloop.counter}}.removeAttribute('disabled');
                            fund{{forloop.counter}}.removeAttribute('disabled');
                            start_date{{forloop.counter}}.removeAttribute('disabled');
                            end_date{{forloop.counter}}.removeAttribute('disabled');
                            statement{{forloop.counter}}.removeAttribute('disabled');
                            liquidBut{{forloop.counter}}.style.cursor = 'pointer'
                            fundBut{{forloop.counter}}.style.cursor = 'pointer'
                            start_date{{forloop.counter}}.style.cursor = 'pointer'
                            end_date{{forloop.counter}}.style.cursor = 'pointer'
                            statement{{forloop.counter}}.style.cursor = 'pointer'
                            det{{forloop.counter}}.style.cursor = 'pointer'
                            showHide{{ forloop.counter }}.style.display = 'block'
                            showHide{{ forloop.counter }}.style.display = 'flex'
                        } else {
                            $("#del{{forloop.counter}}").prop("disabled", true);
                            subcon2Image{{forloop.counter}}.classList.add('blurred');
                            bfree_mon_card{{forloop.counter}}.classList.add('blurred');
                            freezeText{{forloop.counter}}.textContent = 'Unfreeze';
                            card_status{{forloop.counter}}.textContent = 'Frozen';
                            freezeText{{forloop.counter}}.style.color = '#001F8B';
                            freezeImage{{forloop.counter}}.style.fill = '#001F8B';
                            liquid{{forloop.counter}}.setAttribute('disabled', 'true');
                            liquidBut{{forloop.counter}}.setAttribute('disabled', 'true');
                            fundBut{{forloop.counter}}.setAttribute('disabled', 'true');
                            fund{{forloop.counter}}.setAttribute('disabled', 'true');
                            start_date{{forloop.counter}}.setAttribute('disabled', 'true');
                            end_date{{forloop.counter}}.setAttribute('disabled', 'true');
                            liquidBut{{forloop.counter}}.style.cursor = 'not-allowed'
                            fundBut{{forloop.counter}}.style.cursor = 'not-allowed'
                            start_date{{forloop.counter}}.style.cursor = 'not-allowed'
                            end_date{{forloop.counter}}.style.cursor = 'not-allowed'
                            statement{{forloop.counter}}.setAttribute('disabled', 'true');
                            statement{{forloop.counter}}.style.cursor = 'not-allowed'
                            det{{forloop.counter}}.style.cursor = 'not-allowed'
                            showHide{{ forloop.counter }}.style.display = 'none'
                            det{{forloop.counter}}.setAttribute('href', 'javascript:void(0)');
                        }
                    },
                    error: function(response) {
                        $(".pre-loader").hide();
                        showNotification(response.message);
                    }
                });
            });
        {% endfor %}

        
        document.addEventListener('DOMContentLoaded', function() {
            var amInput = document.querySelector('.create_card_amInput');
            
            function updateAmountField() {
                let value = amInput.value;
            
                // Allow numbers and one dot
                value = value.replace(/[^0-9.]/g, '');
            
                // Prevent multiple dots
                const parts = value.split('.');
                if (parts.length > 2) {
                    value = parts[0] + '.' + parts[1]; // Keep only the first two parts
                }
            
                // Limit to two decimal places
                if (parts[1] && parts[1].length > 2) {
                    parts[1] = parts[1].substring(0, 2); // Truncate to two decimal places
                    value = parts.join('.');
                }
            
                // Add a dollar sign if not present
                if (!value.startsWith('$')) {
                    value = '$' + value;
                }
            
                // Update the input field
                amInput.value = value;
            }
            
            // Attach event listener to update the input field on input event
            amInput.addEventListener('input', updateAmountField);
            
             // Get the form element
            var form = document.getElementById('create_card_form');
        
            // Attach the submit event listener
            form.addEventListener('submit', function(event) {
                showPreloader(event);
                // Get the amount input field
                var amInput = document.querySelector('.create_card_amInput');
                // Remove the first character
                var newValue = amInput.value.substring(1);
                // Update the input field with the modified value
                amInput.value = newValue;
                
            
                // Validate that the amount is a number and meets the minimum value requirement
                if (amInput.value >= 15) {
                    document.getElementById('errorMessage').textContent = '';
                    this.submit();
                } else {
                    $(".pre-loader").hide();
                    updateAmountField();
                    event.preventDefault();
                    document.getElementById('errorMessage').textContent = '*Amount must be a number not less than $15';
                }
            });
            
            var moneyInput = document.querySelector('.money_input');
            
            var liquidateCardMoneyInput = document.querySelector('.liquidate_card_money_input');
            
            function updatemoneyInputField() {
                let value = moneyInput.value;
            
                // Allow numbers and one dot
                value = value.replace(/[^0-9.]/g, '');
            
                // Prevent multiple dots
                const parts = value.split('.');
                if (parts.length > 2) {
                    value = parts[0] + '.' + parts[1]; // Keep only the first two parts
                }
            
                // Limit to two decimal places
                if (parts[1] && parts[1].length > 2) {
                    parts[1] = parts[1].substring(0, 2); // Truncate to two decimal places
                    value = parts.join('.');
                }
            
                // Add a dollar sign if not present
                if (!value.startsWith('$')) {
                    value = '$' + value;
                }
            
                // Update the input field
                moneyInput.value = value;
            }
            
            function updateliquidateCardMoneyInputField() {
                let value = liquidateCardMoneyInput.value;
            
                // Allow numbers and one dot
                value = value.replace(/[^0-9.]/g, '');
            
                // Prevent multiple dots
                const parts = value.split('.');
                if (parts.length > 2) {
                    value = parts[0] + '.' + parts[1]; // Keep only the first two parts
                }
            
                // Limit to two decimal places
                if (parts[1] && parts[1].length > 2) {
                    parts[1] = parts[1].substring(0, 2); // Truncate to two decimal places
                    value = parts.join('.');
                }
            
                // Add a dollar sign if not present
                if (!value.startsWith('$')) {
                    value = '$' + value;
                }
            
                // Update the input field
                liquidateCardMoneyInput.value = value;
            }
            
            // Attach event listener to update the input field on input event
            moneyInput.addEventListener('input', updatemoneyInputField);
            
            moneyInput.addEventListener('input', updateliquidateCardMoneyInputField);
            
             // Get the form element
            var cardFundingForm = document.getElementById('cardFundingForm');
        
            // Attach the submit event listener
            cardFundingForm.addEventListener('submit', function(event) {
                showPreloader(event);
                // Get the amount input field
                var amInput = document.querySelector('.money_input');
                // Remove the first character
                var newValue = amInput.value.substring(1);
                // Update the input field with the modified value
                amInput.value = newValue;
            });
        });
    </script>
    <script>
    function copyToClipboard(elementId) {
        let textToCopy = document.getElementById(elementId).innerText;
        
        textToCopy = textToCopy.trim().replace(/\s\s+/g, ' ');
    
        navigator.clipboard.writeText(textToCopy).then(() => {
            showNotification("Text copied to clipboard!");
        }).catch(err => {
            console.error("Could not copy text: ", err);
        });
    }
    </script>
{% endblock %}

